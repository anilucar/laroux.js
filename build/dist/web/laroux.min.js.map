{"version":3,"sources":["laroux.js"],"names":["scope","emptyFunction","undefined","document","attachEvent","createEventObject","readyState","requestAnimationFrame","callback","setTimeout","Date","now","getComputedStyle","element","this","getPropertyValue","prop","re","test","replace","arguments","toUpperCase","currentStyle","getPropertyCSSValue","CSSPrimitiveValue","primitiveType","getFloatValue","Event","prototype","preventDefault","returnValue","stopPropagation","cancelBubble","Element","eventListeners","addListener","eventname","self","wrapper","event","target","srcElement","currentTarget","push","object","type","listener","removeListener","i","length","eventListener","detachEvent","splice","dispatchEvent","eventObject","fireEvent","addEventListener","removeEventListener","HTMLDocument","Window","Text","innerText","Object","getOwnPropertyDescriptor","defineProperty","get","call","set","value","getAttribute","attribute","attributes","setAttribute","removeAttribute","removeNamedItem","children","add","className","trim","remove","RegExp","split","join","contains","nodeValue","String","observe","keys","item","hasOwnProperty","window","global","top","laroux","selector","parent","Array","helpers","toArray","querySelectorAll","querySelector","$l","extendObject","shift","name","obj","items","ns","path","pathSlices","length1","current","uniqueId","getUniqueId","buildQueryString","values","rfc3986","uri","regEx","encodeURIComponent","toString","substr","buildFormData","data","FormData","append","format","args","replaceAll","text","dictionary","match","camelCase","flag","output","j","currChar","charAt","antiCamelCase","toLowerCase","quoteAttr","spliceString","index","count","slice","random","min","max","Math","floor","find","iterator","context","result","some","list","each","arr","fnc","testOwnProperties","map","dontSkipReturns","results","aeach","amap","unshift","aindex","start","column","key","shuffle","shuffled","rand","merge","tmp","isArray","concat","attr","duplicate","JSON","parse","stringify","getAsArray","NodeList","getLength","constructor","getKeysRecursive","delimiter","prefix","getElement","defaultValue","rest","pos","indexOf","substring","delegates","events","invoke","corsDefault","wrappers","registry","laroux.js","isSuccess","console","log","errorMessage","eval","ajax","xDomainObject","xmlHttpRequestObject","xDomainRequestObject","xhr","crossDomain","XMLHttpRequest","XDomainRequest","xhrResp","options","wrapperFunction","getResponseHeader","response","datatype","responseText","responseXML","wrapperFunc","makeRequest","cors","url","timer","n","timeout","abort","timeoutFn","onreadystatechange","clearTimeout","status","res","e","error","statusText","success","complete","progress","getdata","queryString","jsonp","open","xhrFields","headers","setRequestHeader","postdata","send","postdatatype","successfnc","errorfnc","getJson","getJsonP","method","getScript","post","postJson","Content-Type","next","timers","id","targetKey","currentItem","ontick","removeKeys","state","reset","item2","condition","conditions","triggers","ontrigger","triggerName","eventIdx","conditionKey","conditionObj","promise","_delegates","_delegateQueue","_events","_eventStack","_terminated","then","on","ev","eventName","terminate","eventItem","apply","delegate","lastReturn","err","cookiePath","getCookie","cookie","decodeURIComponent","setCookie","expires","expireValue","toGMTString","vars","removeCookie","getLocal","localStorage","setLocal","removeLocal","getSession","sessionStorage","setSession","removeSession","shortDateFormat","longDateFormat","timeFormat","monthsShort","monthsLong","strings","later","ago","seconds","aminute","minutes","ahour","hours","aday","days","aweek","weeks","amonth","months","ayear","years","parseEpoch","timespan","limitWithWeeks","ceil","date","getCustomDateString","getFullYear","getYear","getMonth","getDate","hour1","getHours","hour2","getMinutes","getSeconds","getDateDiffString","getTime","absTimespan","abs","past","timespanstring","getShortDateString","includeTime","getLongDateString","stack","depth","_data","_depth","_top","setRange","configurable","newValue","oldValue","onupdate","valueKey","getRange","exists","clear","hasClass","classList","addClass","elements","removeClass","toggleClass","cycleClass","getProperty","styleName","style","setProperty","properties","oldProperties","newStyleName","defaultTransition","setTransitionSingle","transition","currentTransitionsArray","transitions","currentTransitions","transitionProperties","css","found","localeCompare","webkitTransition","msTransition","setTransition","show","opacity","hide","height","innerHeight","clientHeight","outerHeight","includeMargin","offsetHeight","marginTop","marginBottom","margins","width","innerWidth","clientWidth","outerWidth","offsetWidth","marginLeft","marginRight","getBoundingClientRect","documentElement","scrollTop","body","left","scrollLeft","aboveTheTop","bottom","belowTheFold","leftOfScreen","right","rightOfScreen","inViewport","rect","docprop","propName","select","selectByClass","getElementsByClassName","selectByTag","getElementsByTagName","selectById","getElementById","selectSingle","oldAttributes","attributeName","datanames","oldDatanames","dataName","eventHistory","setEvent","dom","setEventSingle","fncWrapper","unsetEvent","i1","i2","length2","customEvent","createEvent","initEvent","create","html","frag","createDocumentFragment","temp","createElement","insertAdjacentHTML","firstChild","appendChild","elem","createOption","isDefault","option","selectByValue","selectedIndex","hasChildNodes","removeChild","insert","position","content","prepend","replaceText","textContent","cloneReturn","cloneAppend","cloneInsertAfter","cloneInsertBefore","clone","container","newElement","cloneNode","parentNode","insertBefore","nextSibling","parentElement","ajaxForm","formobj","fncBegin","forms","serializeFormData","isFormField","tagName","getFormFieldValue","disabled","files","checked","setFormFieldValue","toggleFormEditing","selection","selected","lastDisabled","formdata","serialize","deserialize","Node","singleTemplate","arrayTemplate","source","registerBoth","registerSingle","registerArray","register","newFnc","fx","interpolate","easing","cos","PI","newanim","startTime","unit","from","property","Number","anim","onframe","setCss","timestamp","step","time","scrollTo","finishT","to","keyName","keycode","fromCharCode","assign","nodeType","disableInputs","shiftKey","ctrl","ctrlKey","alt","altKey","keyCode","which","apps","pauseUpdate","init","model","appKey","mvc","update","rebind","app","modelKeys","boundElements","eventElements","scanElements","binding","bindStringParser","atts","m","binding1","binding2","chldrn","childNodes","boundElement","lastBuffer","buffer","curr","engines","plain","compile","template","render","compiled","nextIndex","dict","lastIndex","closeIndex","hogan","Hogan","mustache","Mustache","handlebars","Handlebars","lodash","_","underscore","engine","templates","touchStarted","swipeTreshold","precision","tapCount","tapTreshold","longTapTreshold","tapTimer","cached","end","move","locatePointer","targetTouches","touch","pageX","pageY","navigator","onstart","onend","innerEvent","x","y","delta","distance","floatContainer","popup","defaultTimeout","createBox","xclass","message","class","msgbox","ui","loading","elementSelector","defaultDelay","killTimer","display","loadingIndicator","delay","dynamicDates","updateDatesElements","updateDates","getDateString","scrollView","selectedElements","onhidden","onreveal","reveal","createFloatContainer","single","array","c","idc","readyPassed","ready","setInterval"],"mappings":"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","file":"build/dist/web/laroux.min.js","sourcesContent":["/**\n * laroux.js - A jquery substitute for modern browsers (web bundle)\n *\n * @version v2.0.0\n * @link https://larukedi.github.io/laroux.js\n * @license Apache-2.0\n */\n(function (scope) {\n    'use strict';\n\n    var emptyFunction = function () {};\n\n    if (scope.document === undefined) {\n        scope.document = {\n            attachEvent: emptyFunction,\n            createEventObject: emptyFunction,\n            readyState: null\n        };\n    }\n\n    if (!('requestAnimationFrame' in scope)) {\n        scope.requestAnimationFrame = function (callback) {\n            setTimeout(function () { callback(Date.now()); }, 50);\n        };\n    }\n\n    if (!('getComputedStyle' in scope)) {\n        scope.getComputedStyle = function (element) {\n            this.element = element;\n\n            this.getPropertyValue = function (prop) {\n                var re = /(\\-([a-z]){1})/g;\n                if (prop === 'float') {\n                    prop = 'styleFloat';\n                }\n\n                if (re.test(prop)) {\n                    prop = prop.replace(re, function () {\n                        return arguments[2].toUpperCase();\n                    });\n                }\n\n                return this.element.currentStyle[prop] || null;\n            };\n\n            this.getPropertyCSSValue = function (prop) {\n                return new CSSPrimitiveValue(this.element, prop);\n            };\n\n            return this;\n        };\n    }\n\n    if (!('CSSPrimitiveValue' in scope)) {\n        scope.CSSPrimitiveValue = function (element, prop) {\n            this.element = element;\n            this.prop = prop;\n            this.primitiveType = 0;\n\n            this.getFloatValue = function (primitiveType) {\n                var re = /(\\-([a-z]){1})/g,\n                    prop = this.prop;\n\n                if (prop === 'float') {\n                    prop = 'styleFloat';\n                }\n\n                if (re.test(prop)) {\n                    prop = prop.replace(re, function () {\n                        return arguments[2].toUpperCase();\n                    });\n                }\n\n                return this.element.currentStyle[prop] || null;\n            };\n        };\n    }\n\n    if (scope.Event === undefined) {\n        scope.Event = emptyFunction;\n    }\n\n    if (!('preventDefault' in Event.prototype)) {\n        Event.prototype.preventDefault = function () {\n            this.returnValue = false;\n        };\n    }\n\n    if (!('stopPropagation' in Event.prototype)) {\n        Event.prototype.stopPropagation = function () {\n            this.cancelBubble = true;\n        };\n    }\n\n    if (scope.Element === undefined) {\n        scope.Element = emptyFunction;\n    }\n\n    if (!('addEventListener' in Element.prototype)) {\n        var eventListeners = [],\n            addListener = function (eventname, callback) {\n                var self = this,\n                    wrapper = function (event) {\n                        event.target = event.srcElement;\n                        event.currentTarget = self;\n\n                        // if ('handleEvent' in callback) {\n                        //     callback.handleEvent(event);\n                        // } else {\n                        //     callback.call(self, event);\n                        // }\n                        callback(self, event);\n                    };\n\n                if (eventname !== 'DOMContentLoaded') {\n                    this.attachEvent('on' + eventname, wrapper);\n                }\n                eventListeners.push({ object: this, type: eventname, listener: callback, wrapper: wrapper });\n            },\n            removeListener = function (eventname, callback) {\n                for (var i = 0, length = eventListeners.length; i < length; i++) {\n                    var eventListener = eventListeners[i];\n\n                    if (eventListener.object === this && eventListener.type === eventname && eventListener.listener === callback) {\n                        if (eventname != 'DOMContentLoaded') {\n                            this.detachEvent('on' + eventname, eventListener.wrapper);\n                        }\n\n                        eventListeners.splice(i, 1);\n                        break;\n                    }\n                }\n            },\n            dispatchEvent = function (event) {\n                var eventObject = document.createEventObject();\n                this.fireEvent('on' + event.type, eventObject);\n            };\n\n        Element.prototype.addEventListener = addListener;\n        Element.prototype.removeEventListener = removeListener;\n        Element.prototype.dispatchEvent = dispatchEvent;\n\n        if (scope.HTMLDocument !== undefined) {\n            HTMLDocument.prototype.addEventListener = addListener;\n            HTMLDocument.prototype.removeEventListener = removeListener;\n            HTMLDocument.prototype.dispatchEvent = dispatchEvent;\n        }\n\n        if (scope.Window !== undefined) {\n            Window.prototype.addEventListener = addListener;\n            Window.prototype.removeEventListener = removeListener;\n            Window.prototype.dispatchEvent = dispatchEvent;\n        }\n\n        document.attachEvent('onreadystatechange', function () {\n            if (document.readyState == 'complete') {\n                var eventObject = document.createEventObject();\n                // eventObject.srcElement = window;\n\n                for (var i = 0, length = eventListeners.length; i < length; i++) {\n                    if (eventListeners[i].object === document && eventListeners[i].type === 'DOMContentLoaded') {\n                        eventListeners[i].wrapper(eventObject);\n                    }\n                }\n            }\n        });\n    }\n\n    if (scope.Text === undefined) {\n        scope.Text = emptyFunction;\n    }\n\n    if (!('textContent' in Element.prototype)) {\n        var innerText = Object.getOwnPropertyDescriptor(Element.prototype, 'innerText');\n\n        Object.defineProperty(Element.prototype, 'textContent', {\n            get: function () {\n                return innerText.get.call(this);\n            },\n            set: function (value) {\n                return innerText.set.call(this, value);\n            }\n        });\n    }\n\n    if (!('getAttribute' in Element.prototype)) {\n        Element.prototype.getAttribute = function (attribute) {\n            return this.attributes[attribute].value;\n        };\n    }\n\n    if (!('setAttribute' in Element.prototype)) {\n        Element.prototype.setAttribute = function (attribute, value) {\n            this.attributes[attribute].value = value;\n        };\n    }\n\n    if (!('removeAttribute' in Element.prototype)) {\n        Element.prototype.removeAttribute = function (attribute) {\n            this.attributes.removeNamedItem(attribute);\n        };\n    }\n\n    if (!('firstElementChild' in Element.prototype)) {\n        Object.defineProperty(Element.prototype, 'firstElementChild', {\n            get: function () {\n                return this.children[0];\n            }\n        });\n    }\n\n    if (!('classList' in Element.prototype)) {\n        Object.defineProperty(Element.prototype, 'classList', {\n            get: function () {\n                var self = this;\n\n                return {\n                    add: function (className) {\n                        self.className = self.className.trim() + ' ' + className;\n                    },\n\n                    remove: function (className) {\n                        self.className = self.className.replace(\n                            new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'),\n                            ' '\n                        );\n                    },\n\n                    contains: function (className) {\n                        return (new RegExp('(^| )' + className + '( |$)', 'gi').test(self.className));\n                    }\n                };\n            }\n        });\n    }\n\n    if (!('textContent' in Text.prototype)) {\n        var nodeValue = Object.getOwnPropertyDescriptor(Text.prototype, 'nodeValue');\n\n        Object.defineProperty(Text.prototype, 'textContent', {\n            get: function () {\n                return nodeValue.get.call(this);\n            },\n            set: function (value) {\n                return nodeValue.set.call(this, value);\n            }\n        });\n    }\n\n    if (!('trim' in String.prototype)) {\n        String.prototype.trim = function () {\n            return this.replace(/^\\s+|\\s+$/g, '');\n        };\n    }\n\n    if (!('observe' in Object)) {\n        Object.observe = emptyFunction;\n    }\n\n    if (!('keys' in Object)) {\n        Object.keys = function (object) {\n            var keys = [];\n\n            for (var item in object) {\n                if (!object.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                keys.push(item);\n            }\n\n            return keys;\n        };\n    }\n\n    /*\n    if (!('forEach' in Object.prototype)) {\n        Object.prototype.forEach = function (callback) {\n            for (var item in this) {\n                if (!this.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                callback.apply(this, [this[item], item, this]);\n            }\n        };\n    }\n\n    if (!('map' in Object.prototype)) {\n        Object.prototype.map = function (callback) {\n            var results = [];\n\n            for (var item in this) {\n                if (!this.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                results.push(callback.apply(this, [this[item], item, this]));\n            }\n\n            return results;\n        };\n    }\n\n    if (!('forEach' in Array.prototype)) {\n        Array.prototype.forEach = function (callback) {\n            for (var i = 0; i < this.length; i++) {\n                callback.apply(this, [this[i], i, this]);\n            }\n        };\n    }\n\n    if (!('map' in Array.prototype)) {\n        Array.prototype.map = function (callback) {\n            var results = [];\n\n            for (var i = 0; i < this.length; i++) {\n                results.push(callback.apply(this, [this[i], i, this]));\n            }\n\n            return results;\n        };\n    }\n\n    if (!('indexOf' in Array.prototype)) {\n        Array.prototype.indexOf = function (object, start) {\n            for (var i = (start || 0), length = this.length; i < length; i++) {\n                if (this[i] === object) {\n                    return i;\n                }\n            }\n\n            return -1;\n        };\n    }\n    */\n\n}(typeof window !== 'undefined' ? window : global));\n\n(function () {\n    'use strict';\n\n    var top = (typeof global !== 'undefined') ? global : window;\n\n    // core\n    top.laroux = function (selector, parent) {\n        if (selector instanceof Array) {\n            return laroux.helpers.toArray(\n                (parent || document).querySelectorAll(selector)\n            );\n        }\n\n        /*\n        // FIXME: non-chrome optimization\n        var re = /^#([^\\+\\>\\[\\]\\.# ]*)$/.exec(selector);\n        if (re) {\n            if (parent === undefined) {\n                return document.getElementById(re[1]);\n            }\n\n            return parent.getElementById(re[1]);\n        }\n        */\n\n        return (parent || document).querySelector(selector);\n    };\n    if (top.$l === undefined) {\n        top.$l = laroux;\n    }\n\n    laroux.helpers = {\n        extendObject: function () {\n            var target = Array.prototype.shift.call(arguments),\n                isArray = target instanceof Array;\n\n            for (var item in arguments) {\n                for (var name in arguments[item]) {\n                    // if (isArray) {\n                    //     target.push(arguments[item][name]);\n                    //     continue;\n                    // }\n\n                    /* target[name].constructor === Object */\n                    if (target.hasOwnProperty(name) && target[name] instanceof Object) {\n                        laroux.helpers.extendObject(target[name], arguments[item][name]);\n                        continue;\n                    }\n\n                    target[name] = arguments[item][name];\n                }\n            }\n        },\n\n        toArray: function (obj) {\n            var length = obj.length,\n                items = new Array(length);\n\n            for (var i = 0; i < length; i++) {\n                items[i] = obj[i];\n            }\n            return items;\n        }\n    };\n\n    laroux.ns = function (path, obj) {\n        var pathSlices = path.split('.'),\n            parent = top;\n\n        for (var i = 0, length1 = pathSlices.length; i < length1; i++) {\n            var current = pathSlices[i];\n\n            if (parent[current] === undefined) {\n                parent[current] = {};\n            }\n\n            parent = parent[current];\n        }\n\n        if (obj !== undefined) {\n            laroux.helpers.extendObject(parent, obj);\n        }\n\n        return parent;\n    };\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // helpers\n    laroux.ns('laroux.helpers', {\n        uniqueId: 0,\n\n        getUniqueId: function () {\n            /*jslint plusplus: true */\n            return 'uid-' + (++laroux.helpers.uniqueId);\n        },\n\n        buildQueryString: function (values, rfc3986) {\n            var uri = '',\n                regEx = /%20/g;\n\n            for (var name in values) {\n                if (!values.hasOwnProperty(name)) {\n                    continue;\n                }\n\n                if (typeof values[name] != 'function') {\n                    if (rfc3986 || false) {\n                        uri += '&' + encodeURIComponent(name).replace(regEx, '+') + '=' + encodeURIComponent(values[name].toString()).replace(regEx, '+');\n                    } else {\n                        uri += '&' + encodeURIComponent(name) + '=' + encodeURIComponent(values[name].toString());\n                    }\n                }\n            }\n\n            return uri.substr(1);\n        },\n\n        buildFormData: function (values) {\n            var data = new FormData();\n\n            for (var name in values) {\n                if (!values.hasOwnProperty(name)) {\n                    continue;\n                }\n\n                if (typeof values[name] != 'function') {\n                    data.append(name, values[name]);\n                }\n            }\n\n            return data;\n        },\n\n        format: function () {\n            var args = arguments;\n            return Array.prototype.shift.call(args).replace(\n                /%s/g,\n                function () {\n                    return Array.prototype.shift.call(args);\n                }\n            );\n        },\n\n        replaceAll: function (text, dictionary) {\n            var re = new RegExp(Object.keys(dictionary).join('|'), 'g');\n\n            return text.replace(\n                re,\n                function (match) {\n                    return dictionary[match];\n                }\n            );\n        },\n\n        camelCase: function (value) {\n            var flag = false;\n            var output = '';\n\n            for (var j = 0; j < value.length; j++) {\n                var currChar = value.charAt(j);\n                if (currChar == '-') {\n                    flag = true;\n                    continue;\n                }\n\n                output += (!flag) ? currChar : currChar.toUpperCase();\n                flag = false;\n            }\n\n            return output;\n        },\n\n        antiCamelCase: function (value) {\n            var output = '';\n\n            for (var j = 0; j < value.length; j++) {\n                var currChar = value.charAt(j);\n                if (currChar != '-' && currChar == currChar.toUpperCase()) {\n                    output += '-' + currChar.toLowerCase();\n                    continue;\n                }\n\n                output += currChar;\n            }\n\n            return output;\n        },\n\n        quoteAttr: function (value) {\n            return value.replace(/&/g, '&amp;')\n                        .replace(/'/g, '&apos;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/</g, '&lt;')\n                        .replace(/>/g, '&gt;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/\\r\\n/g, '&#13;')\n                        .replace(/[\\r\\n]/g, '&#13;');\n        },\n\n        spliceString: function (value, index, count, add) {\n            return value.slice(0, index) + (add || '') + value.slice(index + count);\n        },\n\n        random: function (min, max) {\n            return min + Math.floor(Math.random() * (max - min + 1));\n        },\n\n        find: function (obj, iterator, context) {\n            var result;\n\n            obj.some(function (value, index, list) {\n                if (iterator.call(context, value, index, list)) {\n                    result = value;\n                    return true;\n                }\n            });\n\n            return result;\n        },\n\n        each: function (arr, fnc, testOwnProperties) {\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (fnc(item, arr[item]) === false) {\n                    break;\n                }\n            }\n\n            return arr;\n        },\n\n        map: function (arr, fnc, dontSkipReturns, testOwnProperties) {\n            var results = [];\n\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var result = fnc(arr[item], item);\n                if (result === false) {\n                    break;\n                }\n\n                if (dontSkipReturns || result !== undefined) {\n                    results.push(result);\n                }\n            }\n\n            return results;\n        },\n\n        index: function (arr, value, testOwnProperties) {\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (arr[item] === object) {\n                    return item;\n                }\n            }\n\n            return null;\n        },\n\n        aeach: function (arr, fnc) {\n            for (var i = 0, length = arr.length; i < length; i++) {\n                if (fnc(i, arr[i]) === false) {\n                    break;\n                }\n            }\n\n            return arr;\n        },\n\n        amap: function (arr, fnc, dontSkipReturns) {\n            var results = [];\n\n            for (var i = 0, length = arr.length; i < length; i++) {\n                var result = fnc(arr[i], i);\n                if (result === false) {\n                    break;\n                }\n\n                if (dontSkipReturns || result !== undefined) {\n                    results.unshift(result);\n                }\n            }\n\n            return results;\n        },\n\n        aindex: function (arr, value, start) {\n            for (var i = (start || 0), length = arr.length; i < length; i++) {\n                if (arr[i] === value) {\n                    return i;\n                }\n            }\n\n            return -1;\n        },\n\n        column: function (obj, key) {\n            return laroux.helpers.map(\n                obj,\n                function (value) {\n                    return value[key];\n                },\n                true\n            );\n        },\n\n        shuffle: function (obj) {\n            var index = 0,\n                shuffled = [];\n\n            for (var item in obj) {\n                if (!obj.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var rand = laroux.helpers.random(0, index);\n                shuffled[index++] = shuffled[rand];\n                shuffled[rand] = obj[item];\n            }\n\n            return shuffled;\n        },\n\n        merge: function () {\n            var target = Array.prototype.shift.call(arguments),\n                tmp = target,\n                isArray = tmp instanceof Array;\n\n            for (var item in arguments) {\n                if (isArray) {\n                    tmp = tmp.concat(arguments[item]);\n                    continue;\n                }\n\n                for (var attr in arguments[item]) {\n                    if (!arguments[item].hasOwnProperty(attr)) {\n                        continue;\n                    }\n\n                    tmp[attr] = arguments[item][attr];\n                }\n            }\n\n            return tmp;\n        },\n\n        duplicate: function (obj) {\n            return JSON.parse(JSON.stringify(obj));\n        },\n\n        toArray: function (obj) {\n            var length = obj.length,\n                items = new Array(length);\n\n            for (var i = 0; i < length; i++) {\n                items[i] = obj[i];\n            }\n\n            return items;\n        },\n\n        getAsArray: function (obj) {\n            var items;\n\n            if (obj instanceof Array) {\n                items = obj;\n            } else if (obj instanceof NodeList) {\n                var length = obj.length;\n\n                items = new Array(length);\n                for (var i = 0; i < length; i++) {\n                    items[i] = obj[i];\n                }\n            } else {\n                items = [obj];\n            }\n\n            return items;\n        },\n\n        getLength: function (obj) {\n            if (obj.constructor === Object) {\n                if (obj.length !== undefined) {\n                    return obj.length;\n                }\n\n                return Object.keys(obj).length;\n            }\n\n            return -1;\n        },\n\n        getKeysRecursive: function (obj, delimiter, prefix, keys) {\n            if (delimiter === undefined) {\n                delimiter = '.';\n            }\n\n            if (prefix === undefined) {\n                prefix = '';\n                keys = [];\n            }\n\n            for (var item in obj) {\n                if (!obj.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                keys.push(prefix + item);\n\n                if (obj[item] !== undefined && obj[item] !== null && obj[item].constructor === Object) {\n                    laroux.helpers.getKeysRecursive(obj[item], delimiter, prefix + item + delimiter, keys);\n                    continue;\n                }\n            }\n\n            return keys;\n        },\n\n        getElement: function (obj, path, defaultValue, delimiter) {\n            if (defaultValue === undefined) {\n                defaultValue = null;\n            }\n\n            if (delimiter === undefined) {\n                delimiter = '.';\n            }\n\n            var pos = path.indexOf(delimiter);\n            var key;\n            var rest;\n            if (pos === -1) {\n                key = path;\n                rest = null;\n            } else {\n                key = path.substring(0, pos);\n                rest = path.substring(pos + 1);\n            }\n\n            if (!(key in obj)) {\n                return defaultValue;\n            }\n\n            if (rest === null || rest.length === 0) {\n                return obj[key];\n            }\n\n            return laroux.helpers.getElement(obj[key], rest, defaultValue, delimiter);\n        }\n    });\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // events\n    laroux.ns('laroux.events', {\n        delegates: [],\n\n        add: function (event, fnc) {\n            laroux.events.delegates.push({ event: event, fnc: fnc });\n        },\n\n        invoke: function (event, args) {\n            for (var item in laroux.events.delegates) {\n                if (!laroux.events.delegates.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (laroux.events.delegates[item].event != event) {\n                    continue;\n                }\n\n                laroux.events.delegates[item].fnc(args);\n            }\n        }\n    });\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // ajax - partially taken from 'jquery in parts' project\n    //        can be found at: https://github.com/mythz/jquip/\n    laroux.ns('laroux.ajax', {\n        corsDefault: false,\n\n        wrappers: {\n            registry: {\n                'laroux.js': function (data) {\n                    if (!data.isSuccess) {\n                        console.log('Error: ' + data.errorMessage);\n                        return;\n                    }\n\n                    var obj;\n\n                    if (data.format === 'json') {\n                        obj = JSON.parse(data.object);\n                    } else if (data.format === 'script') {\n                        /*jshint evil:true */\n                        /*jslint evil:true */\n                        obj = eval(data.object);\n                    } else { // if (data.format == 'xml') {\n                        obj = data.object;\n                    }\n\n                    return obj;\n                }\n            },\n\n            set: function (name, fnc) {\n                laroux.ajax.wrappers.registry[name] = fnc;\n            }\n        },\n\n        xDomainObject: false,\n        xmlHttpRequestObject: null,\n        xDomainRequestObject: null,\n        xhr: function (crossDomain) {\n            if (laroux.ajax.xmlHttpRequestObject === null) {\n                laroux.ajax.xmlHttpRequestObject = new XMLHttpRequest();\n            }\n\n            if (crossDomain) {\n                if (!('withCredentials' in laroux.ajax.xmlHttpRequestObject) && typeof XDomainRequest !== 'undefined') {\n                    laroux.ajax.xDomainObject = true;\n\n                    if (laroux.ajax.xDomainRequestObject === null) {\n                        laroux.ajax.xDomainRequestObject = new XDomainRequest();\n                    }\n\n                    return laroux.ajax.xDomainRequestObject;\n                }\n            } else {\n                laroux.ajax.xDomainObject = false;\n            }\n\n            return laroux.ajax.xmlHttpRequestObject;\n        },\n\n        xhrResp: function (xhr, options) {\n            var wrapperFunction = xhr.getResponseHeader('X-Response-Wrapper-Function'),\n                response;\n\n            if (options.datatype === undefined) {\n                response = xhr.responseText;\n            } else if (options.datatype === 'json') {\n                response = JSON.parse(xhr.responseText);\n            } else if (options.datatype === 'script') {\n                /*jshint evil:true */\n                /*jslint evil:true */\n                response = eval(xhr.responseText);\n            } else if (options.datatype === 'xml') {\n                response = xhr.responseXML;\n            } else {\n                response = xhr.responseText;\n            }\n\n            if (wrapperFunction && (wrapperFunction in laroux.ajax.wrappers.registry)) {\n                response = laroux.ajax.wrappers.registry[wrapperFunction](response);\n            }\n\n            return {\n                response: response,\n                wrapperFunc: wrapperFunction\n            };\n        },\n\n        makeRequest: function (options) {\n            var cors = options.cors || laroux.ajax.corsDefault,\n                xhr = laroux.ajax.xhr(cors),\n                url = options.url,\n                timer = null,\n                n = 0;\n\n            if (options.timeout !== undefined) {\n                timer = setTimeout(\n                    function () {\n                        xhr.abort();\n                        if (options.timeoutFn !== undefined) {\n                            options.timeoutFn(options.url);\n                        }\n                    },\n                    options.timeout\n                );\n            }\n\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4) {\n                    if (timer !== null) {\n                        clearTimeout(timer);\n                    }\n\n                    if (xhr.status < 300) {\n                        var res = null,\n                            isSuccess = true;\n\n                        try {\n                            res = laroux.ajax.xhrResp(xhr, options);\n                        } catch (e) {\n                            if (options.error !== undefined) {\n                                options.error(xhr, xhr.status, xhr.statusText);\n                            }\n\n                            laroux.events.invoke('ajaxError', [xhr, xhr.status, xhr.statusText, options]);\n                            isSuccess = false;\n                        }\n\n                        if (isSuccess) {\n                            if (options.success !== undefined && res !== null) {\n                                options.success(res.response, res.wrapperFunc);\n                            }\n\n                            laroux.events.invoke('ajaxSuccess', [xhr, res.response, res.wrapperFunc, options]);\n                        }\n                    } else {\n                        if (options.error !== undefined) {\n                            options.error(xhr, xhr.status, xhr.statusText);\n                        }\n\n                        laroux.events.invoke('ajaxError', [xhr, xhr.status, xhr.statusText, options]);\n                    }\n\n                    if (options.complete !== undefined) {\n                        options.complete(xhr, xhr.statusText);\n                    }\n\n                    laroux.events.invoke('ajaxComplete', [xhr, xhr.statusText, options]);\n                } else if (options.progress !== undefined) {\n                    /*jslint plusplus: true */\n                    options.progress(++n);\n                }\n            };\n\n            if (options.getdata !== undefined && options.getdata !== null) {\n                if (options.getdata.constructor === Object) {\n                    var queryString = laroux.helpers.buildQueryString(options.getdata);\n                    if (queryString.length > 0) {\n                        url += ((url.indexOf('?') < 0) ? '?' : '&') + queryString;\n                    }\n                } else {\n                    url += ((url.indexOf('?') < 0) ? '?' : '&') + options.getdata;\n                }\n            }\n\n            if (options.jsonp !== undefined) {\n                url += ((url.indexOf('?') < 0) ? '?' : '&') + 'jsonp=' + options.jsonp;\n            }\n\n            if (!laroux.ajax.xDomainObject) {\n                xhr.open(options.type, url, true);\n            } else {\n                xhr.open(options.type, url);\n            }\n\n            try {\n                if (options.xhrFields !== undefined) {\n                    for (var i in options.xhrFields) {\n                        if (!options.xhrFields.hasOwnProperty(i)) {\n                            continue;\n                        }\n\n                        xhr[i] = options.xhrFields[i];\n                    }\n                }\n\n                var headers = options.headers || {};\n\n                if (!cors) {\n                    headers['X-Requested-With'] = 'XMLHttpRequest';\n\n                    if (options.wrapper) {\n                        headers['X-Wrapper-Function'] = 'laroux.js';\n                    }\n                }\n\n                for (var j in headers) {\n                    if (!headers.hasOwnProperty(j)) {\n                        continue;\n                    }\n\n                    xhr.setRequestHeader(j, headers[j]);\n                }\n            } catch (e) {\n                console.log(e);\n            }\n\n            if (options.postdata === undefined || options.postdata === null) {\n                xhr.send(null);\n                return;\n            }\n\n            switch (options.postdatatype) {\n                case 'json':\n                    xhr.send(JSON.stringify(options.postdata));\n                    break;\n                case 'form':\n                    xhr.send(laroux.helpers.buildFormData(options.postdata));\n                    break;\n                default:\n                    xhr.send(options.postdata);\n                    break;\n            }\n        },\n\n        get: function (path, values, successfnc, errorfnc, cors) {\n            laroux.ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'html',\n                getdata: values,\n                wrapper: true,\n                cors: cors || laroux.ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getJson: function (path, values, successfnc, errorfnc, cors) {\n            laroux.ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'json',\n                getdata: values,\n                wrapper: true,\n                cors: cors || laroux.ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getJsonP: function (path, values, method, successfnc, errorfnc, cors) {\n            laroux.ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'script',\n                getdata: values,\n                jsonp: method,\n                wrapper: false,\n                cors: cors || laroux.ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getScript: function (path, values, successfnc, errorfnc, cors) {\n            laroux.ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'script',\n                getdata: values,\n                wrapper: false,\n                cors: cors || laroux.ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        post: function (path, values, successfnc, errorfnc, cors) {\n            laroux.ajax.makeRequest({\n                type: 'POST',\n                url: path,\n                datatype: 'json',\n                postdata: values,\n                postdatatype: 'form',\n                wrapper: true,\n                cors: cors || laroux.ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        postJson: function (path, values, successfnc, errorfnc, cors) {\n            laroux.ajax.makeRequest({\n                type: 'POST',\n                url: path,\n                datatype: 'json',\n                postdata: values,\n                postdatatype: 'json',\n                headers: {\n                    'Content-Type': 'application/json; charset=UTF-8'\n                },\n                wrapper: true,\n                cors: cors || laroux.ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        }\n    });\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // timers\n    laroux.ns('laroux.timers', {\n        data: [],\n\n        set: function (timer) {\n            timer.next = Date.now() + timer.timeout;\n            laroux.timers.data.push(timer);\n        },\n\n        remove: function (id) {\n            var targetKey = null;\n\n            for (var item in laroux.timers.data) {\n                if (!laroux.timers.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux.timers.data[item];\n\n                if (currentItem.id !== undefined && currentItem.id == id) {\n                    targetKey = item;\n                    break;\n                }\n            }\n\n            if (targetKey !== null) {\n                laroux.timers.data.splice(targetKey, 1);\n                return true;\n            }\n\n            return false;\n        },\n\n        ontick: function () {\n            var now = Date.now();\n\n            var removeKeys = [];\n            for (var item in laroux.timers.data) {\n                if (!laroux.timers.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux.timers.data[item];\n\n                if (currentItem.next <= now) {\n                    var result = currentItem.ontick(currentItem.state);\n\n                    if (result !== false && currentItem.reset) {\n                        currentItem.next = now + currentItem.timeout;\n                    } else {\n                        removeKeys.unshift(item);\n                    }\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux.timers.data.splice(removeKeys[item2], 1);\n            }\n        }\n    });\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // triggers\n    laroux.ns('laroux.triggers', {\n        delegates: [],\n        list: [],\n\n        set: function (condition, fnc, state) {\n            var conditions = laroux.helpers.getAsArray(condition);\n\n            for (var item in conditions) {\n                if (!conditions.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (laroux.helpers.aindex(laroux.triggers.list, conditions[item]) === -1) {\n                    laroux.triggers.list.push(conditions[item]);\n                }\n            }\n\n            laroux.triggers.delegates.push({\n                conditions: conditions,\n                fnc: fnc,\n                state: state\n            });\n        },\n\n        ontrigger: function (triggerName, args) {\n            var eventIdx = laroux.helpers.aindex(laroux.triggers.list, triggerName);\n            if (eventIdx !== -1) {\n                laroux.triggers.list.splice(eventIdx, 1);\n            }\n\n            var removeKeys = [];\n            for (var item in laroux.triggers.delegates) {\n                if (!laroux.triggers.delegates.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var count = 0;\n                var currentItem = laroux.triggers.delegates[item];\n\n                for (var conditionKey in currentItem.conditions) {\n                    if (!currentItem.conditions.hasOwnProperty(conditionKey)) {\n                        continue;\n                    }\n\n                    var conditionObj = currentItem.conditions[conditionKey];\n\n                    if (laroux.helpers.aindex(laroux.triggers.list, conditionObj) !== -1) {\n                        count++;\n                        // break;\n                    }\n                }\n\n                if (count === 0) {\n                    currentItem.fnc(\n                        {\n                            state: currentItem.state,\n                            args: laroux.helpers.getAsArray(args)\n                        }\n                    );\n                    removeKeys.unshift(item);\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux.triggers.delegates.splice(removeKeys[item2], 1);\n            }\n\n            // console.log('trigger name: ' + triggerName);\n        }\n    });\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // promise\n    laroux.ns('laroux', {\n        promise: function (fnc) {\n            if (!(this instanceof laroux.promise)) {\n                return new laroux.promise(fnc);\n            }\n\n            this._delegates = [];\n            this._delegateQueue = [];\n            this._events = [];\n            this._eventStack = [];\n            this._terminated = false;\n\n            if (fnc !== undefined) {\n                this.then(fnc);\n            }\n        }\n    });\n\n    laroux.promise.prototype.then = function (fnc) {\n        this._delegates.push(fnc);\n        this._delegateQueue.push(fnc);\n\n        return this;\n    };\n\n    laroux.promise.prototype.on = function (condition, fnc) {\n        var conditions = laroux.helpers.getAsArray(condition),\n            ev = {\n                conditions: conditions,\n                fnc: fnc\n            };\n\n        this._events.push(ev);\n        this._eventStack.push(ev);\n\n        return this;\n    };\n\n    laroux.promise.prototype.invoke = function (eventName, terminate, args) {\n        var removeKeys = [];\n        for (var item in this._eventStack) {\n            if (!this._eventStack.hasOwnProperty(item)) {\n                continue;\n            }\n\n            var eventItem = this._eventStack[item],\n                eventIdx = laroux.helpers.aindex(eventItem.conditions, eventName);\n\n            if (eventIdx !== -1) {\n                eventItem.conditions.splice(eventIdx, 1);\n            }\n\n            if (eventItem.conditions.length > 0) {\n                continue;\n            }\n\n            removeKeys.unshift(item);\n            eventItem.fnc.apply(this, args);\n        }\n\n        for (var item2 in removeKeys) {\n            if (!removeKeys.hasOwnProperty(item2)) {\n                continue;\n            }\n\n            this._eventStack.splice(removeKeys[item2], 1);\n        }\n\n        if (terminate === true) {\n            this._terminated = true;\n            this.invoke('complete', false);\n        }\n    };\n\n    laroux.promise.prototype.start = function () {\n        var self = this,\n            delegate = this._delegateQueue.shift(),\n            args = laroux.helpers.toArray(arguments);\n\n        if (this._terminated) {\n            return;\n        }\n\n        if (delegate === undefined) {\n            this.invoke('success', true, args);\n            return;\n        }\n\n        setTimeout(function () {\n            try {\n                var lastReturn = delegate.apply(self, args);\n                self.start.call(self, lastReturn);\n            } catch (err) {\n                self.invoke('error', true, [err]);\n            }\n        }, 0);\n\n        return this;\n    };\n\n    laroux.promise.prototype.reset = function () {\n        this._delegateQueue = this._delegates.slice();\n        this._eventStack = this._events.slice();\n        this._terminated = false;\n\n        return this;\n    };\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // vars\n    laroux.ns('laroux.vars', {\n        cookiePath: '/',\n\n        getCookie: function (name, defaultValue) {\n            var re = new RegExp(encodeURIComponent(name) + '=[^;]+', 'i'),\n                match = document.cookie.match(re);\n\n            if (!match) {\n                return defaultValue || null;\n            }\n\n            return decodeURIComponent(match[0].split('=')[1]);\n        },\n\n        setCookie: function (name, value, expires, path) {\n            var expireValue = '';\n            if (expires) {\n                expireValue = '; expires=' + expires.toGMTString();\n            }\n\n            document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(value) + expireValue + '; path=' + (path || laroux.vars.cookiePath);\n        },\n\n        removeCookie: function (name, path) {\n            document.cookie = encodeURIComponent(name) + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=' + (path || laroux.vars.cookiePath);\n        },\n\n        getLocal: function (name, defaultValue) {\n            if (!(name in localStorage)) {\n                return defaultValue || null;\n            }\n\n            return JSON.parse(localStorage[name]);\n        },\n\n        setLocal: function (name, value) {\n            localStorage[name] = JSON.stringify(value);\n        },\n\n        removeLocal: function (name) {\n            delete localStorage[name];\n        },\n\n        getSession: function (name, defaultValue) {\n            if (!(name in sessionStorage)) {\n                return defaultValue || null;\n            }\n\n            return JSON.parse(sessionStorage[name]);\n        },\n\n        setSession: function (name, value) {\n            sessionStorage[name] = JSON.stringify(value);\n        },\n\n        removeSession: function (name) {\n            delete sessionStorage[name];\n        }\n    });\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // date\n    laroux.ns('laroux.date', {\n        shortDateFormat: 'dd.MM.yyyy',\n        longDateFormat: 'dd MMMM yyyy',\n        timeFormat: 'HH:mm',\n\n        monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n        monthsLong: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n\n        strings: {\n            now:     'now',\n            later:   'later',\n            ago:     'ago',\n            seconds: 'seconds',\n            aminute: 'a minute',\n            minutes: 'minutes',\n            ahour:   'a hour',\n            hours:   'hours',\n            aday:    'a day',\n            days:    'days',\n            aweek:   'a week',\n            weeks:   'weeks',\n            amonth:  'a month',\n            months:  'months',\n            ayear:   'a year',\n            years:   'years'\n        },\n\n        parseEpoch: function (timespan, limitWithWeeks) {\n            if (timespan < 60 * 1000) {\n                timespan = Math.ceil(timespan / 1000);\n\n                return timespan + ' ' + laroux.date.strings.seconds;\n            }\n\n            if (timespan < 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux.date.strings.aminute;\n                }\n\n                return timespan + ' ' + laroux.date.strings.minutes;\n            }\n\n            if (timespan < 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux.date.strings.ahour;\n                }\n\n                return timespan + ' ' + laroux.date.strings.hours;\n            }\n\n            if (timespan < 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux.date.strings.aday;\n                }\n\n                return timespan + ' ' + laroux.date.strings.days;\n            }\n\n            if (timespan < 4 * 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (7 * 24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux.date.strings.aweek;\n                }\n\n                return timespan + ' ' + laroux.date.strings.weeks;\n            }\n\n            if (limitWithWeeks === true) {\n                return null;\n            }\n\n            if (timespan < 30 * 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (30 * 24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux.date.strings.amonth;\n                }\n\n                return timespan + ' ' + laroux.date.strings.months;\n            }\n\n            timespan = Math.ceil(timespan / (365 * 24 * 60 * 60 * 1000));\n\n            if (timespan === 1) {\n                return laroux.date.strings.ayear;\n            }\n\n            return timespan + ' ' + laroux.date.strings.years;\n        },\n\n        getCustomDateString: function (format, date) {\n            var now = date || new Date();\n\n            return format.replace(\n                /yyyy|yy|MMMM|MMM|MM|M|dd|d|hh|h|HH|H|mm|m|ss|s|tt|t/g,\n                function (match) {\n                    switch (match) {\n                    case 'yyyy':\n                        return now.getFullYear();\n\n                    case 'yy':\n                        return now.getYear();\n\n                    case 'MMMM':\n                        return laroux.date.monthsLong[now.getMonth()];\n\n                    case 'MMM':\n                        return laroux.date.monthsShort[now.getMonth()];\n\n                    case 'MM':\n                        return ('0' + (now.getMonth() + 1)).substr(-2, 2);\n\n                    case 'M':\n                        return now.getMonth() + 1;\n\n                    case 'dd':\n                        return ('0' + now.getDate()).substr(-2, 2);\n\n                    case 'd':\n                        return now.getDate();\n\n                    case 'hh':\n                        var hour1 = now.getHours();\n                        return ('0' + (((hour1 % 12) > 0) ? hour1 % 12 : 12)).substr(-2, 2);\n\n                    case 'h':\n                        var hour2 = now.getHours();\n                        return ((hour2 % 12) > 0) ? hour2 % 12 : 12;\n\n                    case 'HH':\n                        return ('0' + now.getHours()).substr(-2, 2);\n\n                    case 'H':\n                        return now.getHours();\n\n                    case 'mm':\n                        return ('0' + now.getMinutes()).substr(-2, 2);\n\n                    case 'm':\n                        return now.getMinutes();\n\n                    case 'ss':\n                        return ('0' + now.getSeconds()).substr(-2, 2);\n\n                    case 's':\n                        return now.getSeconds();\n\n                    case 'tt':\n                        if (now.getHours() >= 12) {\n                            return 'pm';\n                        }\n\n                        return 'am';\n\n                    case 't':\n                        if (now.getHours() >= 12) {\n                            return 'p';\n                        }\n\n                        return 'a';\n                    }\n\n                    return match;\n                }\n            );\n        },\n\n        getDateDiffString: function (date) {\n            var now = Date.now(),\n                timespan = now - date.getTime(),\n                absTimespan = Math.abs(timespan),\n                past = (timespan > 0);\n\n            if (absTimespan <= 3000) {\n                return laroux.date.strings.now;\n            }\n\n            var timespanstring = laroux.date.parseEpoch(absTimespan, true);\n            if (timespanstring !== null) {\n                return timespanstring +\n                    ' ' +\n                    (past ? laroux.date.strings.ago : laroux.date.strings.later);\n            }\n\n            return laroux.date.getShortDateString(date, true);\n        },\n\n        getShortDateString: function (date, includeTime) {\n            return laroux.date.getCustomDateString(\n                includeTime ? laroux.date.shortDateFormat + ' ' + laroux.date.timeFormat : laroux.date.shortDateFormat,\n                date\n            );\n        },\n\n        getLongDateString: function (date, includeTime) {\n            return laroux.date.getCustomDateString(\n                includeTime ? laroux.date.longDateFormat + ' ' + laroux.date.timeFormat : laroux.date.longDateFormat,\n                date\n            );\n        }\n    });\n\n}).call(this);\n\n/*jslint nomen: true */\n(function () {\n    'use strict';\n\n    // stack\n    laroux.ns('laroux', {\n        stack: function (data, depth, top) {\n            if (!(this instanceof laroux.stack)) {\n                return new this(data, depth, top);\n            }\n\n            this._data = {};\n            this._depth = depth;\n            this._top = top || this;\n\n            if (data) {\n                this.setRange(data);\n            }\n        }\n    });\n\n    laroux.stack.prototype.set = function (key, value) {\n        // delete this._data[key];\n\n        var type = typeof value;\n        switch (type) {\n        case 'function':\n            this._data[key] = value;\n\n            Object.defineProperty(\n                this,\n                key,\n                {\n                    configurable: true,\n                    get: function () {\n                        return this._data[key]();\n                    }\n                }\n            );\n            break;\n\n        default:\n            /*\n            if (type == 'object') {\n                this._data[key] = new laroux.stack(\n                    value,\n                    this._depth ?\n                        this._depth + '.' + key :\n                        key,\n                    this._top\n                );\n            } else {\n                this._data[key] = value;\n            }\n            */\n            this._data[key] = value;\n\n            Object.defineProperty(\n                this,\n                key,\n                {\n                    configurable: true,\n                    get: function () {\n                        return this._data[key];\n                    },\n                    set: function (newValue) {\n                        var oldValue = this._data[key];\n                        if (this._data[key] === newValue) {\n                            return;\n                        }\n\n                        // this.set(this, key, newValue);\n                        this._data[key] = newValue;\n                        this._top.onupdate({ scope: this, key: key, oldValue: oldValue, newValue: newValue });\n                    }\n                }\n            );\n            break;\n        }\n    };\n\n    laroux.stack.prototype.setRange = function (values) {\n        for (var valueKey in values) {\n            if (!values.hasOwnProperty(valueKey)) {\n                continue;\n            }\n\n            this.set(valueKey, values[valueKey]);\n        }\n    };\n\n    laroux.stack.prototype.get = function (key, defaultValue) {\n        return this[key] || defaultValue || null;\n    };\n\n    laroux.stack.prototype.getRange = function (keys) {\n        var values = {};\n\n        for (var item in keys) {\n            if (!keys.hasOwnProperty(item)) {\n                continue;\n            }\n\n            values[keys[item]] = this[keys[item]];\n        }\n\n        return values;\n    };\n\n    laroux.stack.prototype.keys = function () {\n        return Object.keys(this._data);\n    };\n\n    laroux.stack.prototype.length = function () {\n        return Object.keys(this._data).length;\n    };\n\n    laroux.stack.prototype.exists = function (key) {\n        return (key in this._data);\n    };\n\n    laroux.stack.prototype.remove = function (key) {\n        if (key in this._data) {\n            delete this[key];\n            delete this._data[key];\n        }\n    };\n\n    laroux.stack.prototype.clear = function () {\n        for (var item in this._data) {\n            if (!this._data.hasOwnProperty(item)) {\n                continue;\n            }\n\n            delete this[item];\n            delete this._data[item];\n        }\n\n        this._data = {};\n    };\n\n    laroux.stack.prototype.onupdate = function (event) {\n    };\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // css\n    laroux.ns('laroux.css', {\n        // class features\n        hasClass: function (element, className) {\n            return element.classList.contains(className);\n        },\n\n        addClass: function (element, className) {\n            var elements = laroux.helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                elements[i].classList.add(className);\n            }\n        },\n\n        removeClass: function (element, className) {\n            var elements = laroux.helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                elements[i].classList.remove(className);\n            }\n        },\n\n        toggleClass: function (element, className) {\n            var elements = laroux.helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                if (elements[i].classList.contains(className)) {\n                    elements[i].classList.remove(className);\n                } else {\n                    elements[i].classList.add(className);\n                }\n            }\n        },\n\n        cycleClass: function (elements, className) {\n            for (var i = 0, length = elements.length; i < length; i++) {\n                if (elements[i].classList.contains(className)) {\n                    elements[i].classList.remove(className);\n                    elements[(i + 1) % length].classList.add(className);\n                    return;\n                }\n            }\n        },\n\n        // style features\n        getProperty: function (element, styleName) {\n            var style = getComputedStyle(element);\n\n            styleName = laroux.helpers.antiCamelCase(styleName);\n\n            return style.getPropertyValue(styleName);\n        },\n\n        setProperty: function (element, properties, value) {\n            var elements = laroux.helpers.getAsArray(element);\n\n            if (typeof properties == 'string') {\n                var oldProperties = properties;\n                properties = {};\n                properties[oldProperties] = value;\n            }\n\n            for (var styleName in properties) {\n                if (!properties.hasOwnProperty(styleName)) {\n                    continue;\n                }\n\n                var newStyleName = laroux.helpers.camelCase(styleName);\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    elements[i].style[newStyleName] = properties[styleName];\n                }\n            }\n        },\n\n        // transition features\n        defaultTransition: '2s ease',\n\n        setTransitionSingle: function (element, transition) {\n            var transitions = laroux.helpers.getAsArray(transition),\n                style = getComputedStyle(element),\n                currentTransitions = style.getPropertyValue('transition') || style.getPropertyValue('-webkit-transition') ||\n                    style.getPropertyValue('-ms-transition') || '',\n                currentTransitionsArray;\n\n            if (currentTransitions.length > 0) {\n                currentTransitionsArray = currentTransitions.split(',');\n            } else {\n                currentTransitionsArray = [];\n            }\n\n            for (var item in transitions) {\n                if (!transitions.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var styleName,\n                    transitionProperties,\n                    pos = transitions[item].indexOf(' ');\n\n                if (pos !== -1) {\n                    styleName = transitions[item].substring(0, pos);\n                    transitionProperties = transitions[item].substring(pos + 1);\n                } else {\n                    styleName = transitions[item];\n                    transitionProperties = laroux.css.defaultTransition;\n                }\n\n                var found = false;\n                for (var j = 0; j < currentTransitionsArray.length; j++) {\n                    if (currentTransitionsArray[j].trim().localeCompare(styleName) === 0) {\n                        currentTransitionsArray[j] = styleName + ' ' + transitionProperties;\n                        found = true;\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    currentTransitionsArray.push(styleName + ' ' + transitionProperties);\n                }\n            }\n\n            var value = currentTransitionsArray.join(', ');\n\n            element.style.transition = value;\n            element.style.webkitTransition = value;\n            element.style.msTransition = value;\n        },\n\n        setTransition: function (element, transition) {\n            var elements = laroux.helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                laroux.css.setTransitionSingle(elements[i], transition);\n            }\n        },\n\n        show: function (element, transitionProperties) {\n            if (transitionProperties !== undefined) {\n                laroux.css.setTransition(element, 'opacity ' + transitionProperties);\n            } else {\n                laroux.css.setTransition(element, 'opacity');\n            }\n\n            laroux.css.setProperty(element, { opacity: 1 });\n        },\n\n        hide: function (element, transitionProperties) {\n            if (transitionProperties !== undefined) {\n                laroux.css.setTransition(element, 'opacity ' + transitionProperties);\n            } else {\n                laroux.css.setTransition(element, 'opacity');\n            }\n\n            laroux.css.setProperty(element, { opacity: 0 });\n        },\n\n        // measurement features\n        // height of element without padding, margin and border\n        height: function (element) {\n            var style = getComputedStyle(element),\n                height = style.getPropertyCSSValue('height');\n\n            return height.getFloatValue(height.primitiveType);\n        },\n\n        // height of element with padding but without margin and border\n        innerHeight: function (element) {\n            return element.clientHeight;\n        },\n\n        // height of element with padding and border but margin optional\n        outerHeight: function (element, includeMargin) {\n            if (includeMargin || false) {\n                return element.offsetHeight;\n            }\n\n            var style = getComputedStyle(element),\n                marginTop = style.getPropertyCSSValue('margin-top'),\n                marginBottom = style.getPropertyCSSValue('margin-bottom'),\n                margins = marginTop.getFloatValue(marginTop.primitiveType) +\n                    marginBottom.getFloatValue(marginBottom.primitiveType);\n\n            return Math.ceil(element.offsetHeight + margins);\n        },\n\n        // width of element without padding, margin and border\n        width: function (element) {\n            var style = getComputedStyle(element),\n                height = style.getPropertyCSSValue('width');\n\n            return height.getFloatValue(height.primitiveType);\n        },\n\n        // width of element with padding but without margin and border\n        innerWidth: function (element) {\n            return element.clientWidth;\n        },\n\n        // width of element with padding and border but margin optional\n        outerWidth: function (element, includeMargin) {\n            if (includeMargin || false) {\n                return element.offsetWidth;\n            }\n\n            var style = getComputedStyle(element),\n                marginLeft = style.getPropertyCSSValue('margin-left'),\n                marginRight = style.getPropertyCSSValue('margin-right'),\n                margins = marginLeft.getFloatValue(marginLeft.primitiveType) +\n                    marginRight.getFloatValue(marginRight.primitiveType);\n\n            return Math.ceil(element.offsetWidth + margins);\n        },\n\n        top: function (element) {\n            return element.getBoundingClientRect().top +\n                ((document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop);\n        },\n\n        left: function (element) {\n            return element.getBoundingClientRect().left +\n                ((document.documentElement && document.documentElement.scrollLeft) || document.body.scrollLeft);\n        },\n\n        aboveTheTop: function (element) {\n            return element.getBoundingClientRect().bottom <= 0;\n        },\n\n        belowTheFold: function (element) {\n            return element.getBoundingClientRect().top > innerHeight;\n        },\n\n        leftOfScreen: function (element) {\n            return element.getBoundingClientRect().right <= 0;\n        },\n\n        rightOfScreen: function (element) {\n            return element.getBoundingClientRect().left > innerWidth;\n        },\n\n        inViewport: function (element) {\n            var rect = element.getBoundingClientRect();\n\n            return !(rect.bottom <= 0 || rect.top > innerHeight ||\n                rect.right <= 0 || rect.left > innerWidth);\n        }\n    });\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // dom\n    laroux.ns('laroux.dom', {\n        docprop: function (propName) {\n            return document.documentElement.classList.contains(propName);\n        },\n\n        select: function (selector, parent) {\n            return laroux.helpers.toArray(\n                (parent || document).querySelectorAll(selector)\n            );\n        },\n\n        selectByClass: function (selector, parent) {\n            return laroux.helpers.toArray(\n                (parent || document).getElementsByClassName(selector)\n            );\n        },\n\n        selectByTag: function (selector, parent) {\n            return laroux.helpers.toArray(\n                (parent || document).getElementsByTagName(selector)\n            );\n        },\n\n        selectById: function (selector, parent) {\n            return (parent || document).getElementById(selector);\n        },\n\n        selectSingle: function (selector, parent) {\n            return (parent || document).querySelector(selector);\n        },\n\n        attr: function (element, attributes, value) {\n            if (value === undefined && attributes.constructor !== Object) {\n                return element.getAttribute(attributes);\n            }\n\n            var elements = laroux.helpers.getAsArray(element);\n            if (typeof attributes === 'string') {\n                var oldAttributes = attributes;\n                attributes = {};\n                attributes[oldAttributes] = value;\n            }\n\n            for (var attributeName in attributes) {\n                if (!attributes.hasOwnProperty(attributeName)) {\n                    continue;\n                }\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (attributes[attributeName] === null) {\n                        element.removeAttribute(attributeName);\n                    } else {\n                        element.setAttribute(attributeName, attributes[attributeName]);\n                    }\n                }\n            }\n        },\n\n        data: function (element, datanames, value) {\n            if (value === undefined && datanames.constructor !== Object) {\n                return element.getAttribute('data-' + datanames);\n            }\n\n            var elements = laroux.helpers.getAsArray(element);\n            if (typeof datanames == 'string') {\n                var oldDatanames = datanames;\n                datanames = {};\n                datanames[oldDatanames] = value;\n            }\n\n            for (var dataName in datanames) {\n                if (!datanames.hasOwnProperty(dataName)) {\n                    continue;\n                }\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (datanames[dataName] === null) {\n                        element.removeAttribute('data-' + dataName);\n                    } else {\n                        element.setAttribute('data-' + dataName, datanames[dataName]);\n                    }\n                }\n            }\n        },\n\n        eventHistory: [],\n        setEvent: function (element, eventname, fnc) {\n            var elements = laroux.helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                laroux.dom.setEventSingle(elements[i], eventname, fnc);\n            }\n        },\n\n        setEventSingle: function (element, eventname, fnc) {\n            var fncWrapper = function (e) {\n                if (fnc(e, element) === false) {\n                    if (e.preventDefault) {\n                        e.preventDefault();\n                    } else {\n                        event.returnValue = false;\n                    }\n                }\n            };\n\n            laroux.dom.eventHistory.push({ element: element, eventname: eventname, fnc: fnc, fncWrapper: fncWrapper });\n            element.addEventListener(eventname, fncWrapper, false);\n        },\n\n        unsetEvent: function (element, eventname, fnc) {\n            var elements = laroux.helpers.getAsArray(element);\n\n            for (var i1 = 0, length1 = elements.length; i1 < length1; i1++) {\n                for (var i2 = 0, length2 = laroux.dom.eventHistory.length; i2 < length2; i2++) {\n                    var item = laroux.dom.eventHistory[i2];\n\n                    if (item === undefined) {\n                        continue;\n                    }\n\n                    if (item.element !== elements[i1]) {\n                        continue;\n                    }\n\n                    if (eventname !== undefined && item.eventname !== eventname) {\n                        continue;\n                    }\n\n                    if (fnc !== undefined && item.fnc !== fnc) {\n                        continue;\n                    }\n\n                    item.element.removeEventListener(item.eventname, item.fncWrapper, false);\n                    delete laroux.dom.eventHistory[i2];\n                }\n            }\n        },\n\n        dispatchEvent: function (element, eventname, data) {\n            var customEvent = document.createEvent('Event');\n            for (var item in data) {\n                if (!data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                customEvent[item] = data[item];\n            }\n\n            customEvent.initEvent(eventname, true, true);\n            element.dispatchEvent(customEvent);\n        },\n\n        create: function (html) {\n            var frag = document.createDocumentFragment(),\n                temp = document.createElement('DIV');\n\n            temp.insertAdjacentHTML('beforeend', html);\n            while (temp.firstChild) {\n                frag.appendChild(temp.firstChild);\n            }\n\n            // nulling out the reference, there is no obvious dispose method\n            temp = null;\n\n            return frag;\n        },\n\n        createElement: function (element, attributes, children) {\n            var elem = document.createElement(element);\n\n            if (attributes !== undefined && attributes.constructor === Object) {\n                for (var item in attributes) {\n                    if (!attributes.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    elem.setAttribute(item, attributes[item]);\n                }\n            }\n\n            if (children !== undefined) {\n                if (children.constructor === Object) {\n                    for (var item2 in children) {\n                        if (!children.hasOwnProperty(item2)) {\n                            continue;\n                        }\n\n                        elem.setAttribute(item2, children[item2]);\n                    }\n                } else if (/* typeof children == 'string' && */children.length > 0) {\n                    laroux.dom.append(elem, children);\n                }\n            }\n\n            return elem;\n        },\n\n        createOption: function (element, key, value, isDefault) {\n            /* old behaviour, does not support optgroups as parents.\n            var count = element.options.length;\n            element.options[count] = new Option(value, key);\n\n            if (isDefault === true) {\n                element.options.selectedIndex = count - 1;\n            }\n            */\n\n            var option = document.createElement('OPTION');\n            option.setAttribute('value', key);\n            if (isDefault === true) {\n                option.setAttribute('checked', 'checked');\n            }\n\n            laroux.dom.append(option, value);\n            element.appendChild(option);\n        },\n\n        selectByValue: function (element, value) {\n            for (var i = 0, length = element.options.length; i < length; i++) {\n                if (element.options[i].getAttribute('value') == value) {\n                    element.selectedIndex = i;\n                    break;\n                }\n            }\n        },/*,\n\n        // TODO: it's redundant for now\n        loadImage: function () {\n            var images = [];\n\n            for (var i = 0, length = arguments.length; i < length; i++) {\n                var image = document.createElement('IMG');\n                image.setAttribute('src', arguments[i]);\n\n                images.push(image);\n            }\n\n            return images;\n        },\n\n        loadAsyncScript: function (path, triggerName, async) {\n            var elem = document.createElement('script');\n\n            elem.type = 'text/javascript';\n            elem.async = (async !== undefined) ? async : true;\n            elem.src = path;\n\n            var loaded = false;\n            elem.onload = elem.onreadystatechange = function () {\n                if ((elem.readyState && elem.readyState !== 'complete' && elem.readyState !== 'loaded') || loaded) {\n                    return false;\n                }\n\n                elem.onload = elem.onreadystatechange = null;\n                loaded = true;\n                if (triggerName) {\n                    if (typeof triggerName == 'function') {\n                        triggerName();\n                    } else {\n                        laroux.triggers.ontrigger(triggerName);\n                    }\n                }\n            };\n\n            var head = document.getElementsByTagName('head')[0];\n            head.appendChild(elem);\n        },\n\n        loadAsyncStyle: function (path, triggerName, async) {\n            var elem = document.createElement('LINK');\n\n            elem.type = 'text/css';\n            elem.async = (async !== undefined) ? async : true;\n            elem.href = path;\n            elem.rel = 'stylesheet';\n\n            var loaded = false;\n            elem.onload = elem.onreadystatechange = function () {\n                if ((elem.readyState && elem.readyState !== 'complete' && elem.readyState !== 'loaded') || loaded) {\n                    return false;\n                }\n\n                elem.onload = elem.onreadystatechange = null;\n                loaded = true;\n                if (triggerName) {\n                    if (typeof triggerName == 'function') {\n                        triggerName();\n                    } else {\n                        laroux.triggers.ontrigger(triggerName);\n                    }\n                }\n            };\n\n            var head = document.getElementsByTagName('head')[0];\n            head.appendChild(elem);\n        },*/\n\n        clear: function (element) {\n            while (element.hasChildNodes()) {\n                element.removeChild(element.firstChild);\n            }\n        },\n\n        insert: function (element, position, content) {\n            element.insertAdjacentHTML(position, content);\n        },\n\n        prepend: function (element, content) {\n            element.insertAdjacentHTML('afterbegin', content);\n        },\n\n        append: function (element, content) {\n            element.insertAdjacentHTML('beforeend', content);\n        },\n\n        replace: function (element, content) {\n            laroux.dom.clear(element);\n            element.insertAdjacentHTML('afterbegin', content);\n        },\n\n        replaceText: function (element, content) {\n            // laroux.dom.clear(element);\n            element.textContent = content;\n        },\n\n        remove: function (element) {\n            element.remove();\n        },\n\n        cloneReturn: 0,\n        cloneAppend: 1,\n        cloneInsertAfter: 2,\n        cloneInsertBefore: 3,\n\n        clone: function (element, type, container, target) {\n            var newElement = element.cloneNode(true);\n\n            if (container === undefined) {\n                container = element.parentNode;\n            }\n            if (target === undefined) {\n                target = element;\n            }\n\n            if (type !== undefined && type != laroux.dom.cloneReturn) {\n                if (type == laroux.dom.cloneAppend) {\n                    container.appendChild(newElement);\n                } else if (type == laroux.dom.cloneInsertAfter) {\n                    container.insertBefore(newElement, target.nextSibling);\n                } else { // type == laroux.dom.cloneInsertBefore\n                    container.insertBefore(newElement, target);\n                }\n            }\n\n            return newElement;\n        }/*,\n\n        // TODO: it's redundant for now\n        applyOperations: function (element, operations) {\n            for (var operation in operations) {\n                if (!operations.hasOwnProperty(operation)) {\n                    continue;\n                }\n\n                for (var binding in operations[operation]) {\n                    if (!operations[operation].hasOwnProperty(binding)) {\n                        continue;\n                    }\n\n                    var value = operations[operation][binding];\n\n                    switch (operation) {\n                        case 'setprop':\n                            if (binding.substring(0, 1) == '_') {\n                                element.setAttribute(binding.substring(1), value);\n                                continue;\n                            }\n\n                            if (binding == 'content') {\n                                laroux.dom.replace(element, value);\n                                continue;\n                            }\n                            break;\n                        case 'addprop':\n                            if (binding.substring(0, 1) == '_') {\n                                element.setAttribute(binding.substring(1), element.getAttribute(binding.substring(1)) + value);\n                                continue;\n                            }\n\n                            if (binding == 'content') {\n                                laroux.dom.append(element, value);\n                                continue;\n                            }\n                            break;\n                        case 'removeprop':\n                            if (value.substring(0, 1) == '_') {\n                                element.removeAttribute(value.substring(1));\n                                continue;\n                            }\n\n                            if (value == 'content') {\n                                laroux.dom.clear(element);\n                                continue;\n                            }\n                            break;\n                        case 'addclass':\n                            laroux.css.addClass(element, value);\n                            break;\n                        case 'removeclass':\n                            laroux.css.removeClass(element, value);\n                            break;\n                        case 'addstyle':\n                            laroux.css.setProperty(element, binding, value);\n                            break;\n                        case 'removestyle':\n                            laroux.css.setProperty(element, value, 'inherit !important');\n                            break;\n                        case 'repeat':\n                            break;\n                        default:\n                            console.log(operation);\n                    }\n                }\n            }\n        }*/\n    });\n\n    // a fix for Internet Explorer\n    if (typeof Element !== 'undefined') {\n        if (Element.prototype.remove === undefined) {\n            Element.prototype.remove = function () {\n                if (this.parentElement !== null) {\n                    this.parentElement.removeChild(this);\n                }\n            };\n        }\n    }\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // forms\n    laroux.ns('laroux.forms', {\n        ajaxForm: function (formobj, fnc, fncBegin) {\n            laroux.dom.setEvent(formobj, 'submit', function () {\n                if (fncBegin !== undefined) {\n                    fncBegin();\n                }\n\n                laroux.ajax.post(\n                    formobj.getAttribute('action'),\n                    laroux.forms.serializeFormData(formobj),\n                    fnc\n                );\n\n                return false;\n            });\n        },\n\n        isFormField: function (element) {\n            if (element.tagName === 'SELECT') {\n                return true;\n            }\n\n            if (element.tagName === 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type === 'FILE' || type === 'CHECKBOX' || type === 'RADIO' || type === 'TEXT' || type === 'PASSWORD' || type === 'HIDDEN') {\n                    return true;\n                }\n\n                return false;\n            }\n\n            if (element.tagName === 'TEXTAREA') {\n                return true;\n            }\n\n            return false;\n        },\n\n        getFormFieldValue: function (element) {\n            if (element.disabled === true) {\n                return null;\n            }\n\n            if (element.tagName === 'SELECT') {\n                return element.options[element.selectedIndex].value;\n            }\n\n            if (element.tagName === 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type === 'FILE') {\n                    return element.files[0];\n                }\n\n                if (type === 'CHECKBOX' || type === 'RADIO') {\n                    if (element.checked) {\n                        return element.value;\n                    }\n\n                    return null;\n                }\n\n                if (type === 'TEXT' || type === 'PASSWORD' || type === 'HIDDEN') {\n                    return element.value;\n                }\n\n                return null;\n            }\n\n            if (element.tagName === 'TEXTAREA') {\n                return element.value;\n            }\n\n            return null;\n        },\n\n        setFormFieldValue: function (element, value) {\n            if (element.disabled === true) {\n                return;\n            }\n\n            if (element.tagName === 'SELECT') {\n                for (var option in element.options) {\n                    if (!element.options.hasOwnProperty(option)) {\n                        continue;\n                    }\n\n                    if (element.options[option].value == value) {\n                        element.selectedIndex = option;\n                        return;\n                    }\n                }\n\n                return;\n            }\n\n            if (element.tagName == 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type == 'FILE') {\n                    element.files[0] = value;\n                    return;\n                }\n\n                if (type == 'CHECKBOX' || type == 'RADIO') {\n                    if (value === true || value == element.value) {\n                        element.checked = true;\n                    }\n\n                    return;\n                }\n\n                if (type == 'TEXT' || type == 'PASSWORD' || type == 'HIDDEN') {\n                    element.value = value;\n                    return;\n                }\n\n                return;\n            }\n\n            if (element.tagName == 'TEXTAREA') {\n                element.value = value;\n                return;\n            }\n        },\n\n        toggleFormEditing: function (formobj, value) {\n            var selection = formobj.querySelectorAll('*[name]');\n\n            if (value === undefined) {\n                if (formobj.getAttribute('data-last-enabled') === null) {\n                    formobj.setAttribute('data-last-enabled', 'enabled');\n                    value = false;\n                } else {\n                    formobj.removeAttribute('data-last-enabled');\n                    value = true;\n                }\n            }\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                if (!laroux.forms.isFormField(selection[selected])) {\n                    continue;\n                }\n\n                var lastDisabled = selection[selected].getAttribute('data-last-disabled');\n                if (!value) {\n                    if (lastDisabled === null) {\n                        if (selection[selected].getAttribute('disabled') !== null) {\n                            selection[selected].setAttribute('data-last-disabled', 'disabled');\n                        }\n                    }\n\n                    selection[selected].setAttribute('disabled', 'disabled');\n                    continue;\n                }\n\n                if (lastDisabled !== null) {\n                    selection[selected].removeAttribute('data-last-disabled');\n                } else {\n                    selection[selected].removeAttribute('disabled');\n                }\n            }\n        },\n\n        serializeFormData: function (formobj) {\n            var formdata = new FormData();\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                var value = laroux.forms.getFormFieldValue(selection[selected]);\n\n                if (value !== null) {\n                    formdata.append(selection[selected].getAttribute('name'), value);\n                }\n            }\n\n            return formdata;\n        },\n\n        serialize: function (formobj) {\n            var values = {};\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                var value = laroux.forms.getFormFieldValue(selection[selected]);\n\n                if (value !== null) {\n                    values[selection[selected].getAttribute('name')] = value;\n                }\n            }\n\n            return values;\n        },\n\n        deserialize: function (formobj, data) {\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                laroux.forms.setFormFieldValue(selection[selected], data[selection[selected].getAttribute('name')]);\n            }\n        }\n    });\n\n}).call(this);\n\n/*global NodeList, Node */\n(function () {\n    'use strict';\n\n    // wrapper\n    laroux.ns('laroux', {\n        wrapper: function (selector, parent) {\n            var selection;\n\n            if (selector instanceof Array) {\n                selection = selector;\n            } else if (selector instanceof NodeList) {\n                selection = laroux.helpers.toArray(selector);\n            } else if (selector instanceof Node) {\n                selection = [selector];\n            } else {\n                selection = laroux.dom.select(selector, parent);\n            }\n\n            if (selection.length === 1) {\n                return new laroux.wrapper.singleTemplate(selection[0]);\n            }\n\n            return new laroux.wrapper.arrayTemplate(selection);\n        }\n    });\n\n    laroux.wrapper.singleTemplate = function (element) {\n        this.source = element;\n        this.isArray = false;\n\n        this.get = function (index) {\n            if (index === 0 || index === undefined) {\n                return this.source;\n            }\n\n            return undefined;\n        };\n\n        this.find = function (selector) {\n            return laroux.wrapper(selector, this.source);\n        };\n    };\n\n    laroux.wrapper.arrayTemplate = function (elements) {\n        this.source = elements;\n        this.isArray = true;\n\n        this.get = function (index) {\n            return this.source[index];\n        };\n    };\n\n    laroux.wrapper.registerBoth = 0;\n    laroux.wrapper.registerSingle = 1;\n    laroux.wrapper.registerArray = 2;\n\n    laroux.wrapper.register = function (name, fnc, scope) {\n        var newFnc = function () {\n            var result = fnc.apply(\n                this,\n                [this.source].concat(laroux.helpers.toArray(arguments))\n            );\n\n            return (result === undefined) ? this : result;\n        };\n\n        switch (scope) {\n        case laroux.wrapper.registerSingle:\n            laroux.wrapper.singleTemplate.prototype[name] = newFnc;\n            break;\n        case laroux.wrapper.registerArray:\n            laroux.wrapper.arrayTemplate.prototype[name] = newFnc;\n            break;\n        default:\n            laroux.wrapper.singleTemplate.prototype[name] = newFnc;\n            laroux.wrapper.arrayTemplate.prototype[name] = newFnc;\n            break;\n        }\n    };\n\n    laroux.wrapper.register('attr', laroux.dom.attr, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('data', laroux.dom.data, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('on', laroux.dom.setEventSingle, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('on', laroux.dom.setEvent, laroux.wrapper.registerArray);\n    laroux.wrapper.register('off', laroux.dom.unsetEvent, laroux.wrapper.registerBoth);\n    laroux.wrapper.register('clear', laroux.dom.clear, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('insert', laroux.dom.insert, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('prepend', laroux.dom.prepend, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('append', laroux.dom.append, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('replace', laroux.dom.replace, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('replaceText', laroux.dom.replaceText, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('remove', laroux.dom.remove, laroux.wrapper.registerSingle);\n\n    laroux.wrapper.register('hasClass', laroux.css.hasClass, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('addClass', laroux.css.addClass, laroux.wrapper.registerBoth);\n    laroux.wrapper.register('removeClass', laroux.css.removeClass, laroux.wrapper.registerBoth);\n    laroux.wrapper.register('toggleClass', laroux.css.toggleClass, laroux.wrapper.registerBoth);\n    laroux.wrapper.register('getProperty', laroux.css.getProperty, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('setProperty', laroux.css.setProperty, laroux.wrapper.registerBoth);\n    laroux.wrapper.register('setTransition', laroux.css.setTransition, laroux.wrapper.registerBoth);\n    laroux.wrapper.register('show', laroux.css.show, laroux.wrapper.registerBoth);\n    laroux.wrapper.register('hide', laroux.css.hide, laroux.wrapper.registerBoth);\n    laroux.wrapper.register('height', laroux.css.height, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('innerHeight', laroux.css.innerHeight, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('outerHeight', laroux.css.outerHeight, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('width', laroux.css.width, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('innerWidth', laroux.css.innerWidth, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('outerWidth', laroux.css.outerWidth, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('top', laroux.css.top, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('left', laroux.css.left, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('aboveTheTop', laroux.css.aboveTheTop, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('belowTheFold', laroux.css.belowTheFold, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('leftOfScreen', laroux.css.leftOfScreen, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('rightOfScreen', laroux.css.rightOfScreen, laroux.wrapper.registerSingle);\n    laroux.wrapper.register('inViewport', laroux.css.inViewport, laroux.wrapper.registerSingle);\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // anim\n    laroux.ns('laroux.anim', {\n        data: [],\n\n        fx: {\n            interpolate: function (source, target, shift) {\n                return (source + (target - source) * shift);\n            },\n\n            easing: function (pos) {\n                return (-Math.cos(pos * Math.PI) / 2) + 0.5;\n            }\n        },\n\n        // {object, property, from, to, time, unit, reset}\n        set: function (newanim) {\n            newanim.startTime = null;\n\n            if (newanim.unit === undefined || newanim.unit === null) {\n                newanim.unit = '';\n            }\n\n            if (newanim.from === undefined || newanim.from === null) {\n                if (newanim.object === document.body && newanim.property === 'scrollTop') {\n                    newanim.from = (document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;\n                } else {\n                    newanim.from = newanim.object[newanim.property];\n                }\n            }\n\n            if (typeof newanim.from === 'string') {\n                newanim.from = Number(newanim.from);\n            }\n\n            if (newanim.reset === undefined || newanim.reset === null) {\n                newanim.reset = false;\n            }\n\n            // if (newanim.id === undefined) {\n            //     newanim.id = laroux.helpers.getUniqueId();\n            // }\n\n            laroux.anim.data.push(newanim);\n            if (laroux.anim.data.length === 1) {\n                requestAnimationFrame(laroux.anim.onframe);\n            }\n        },\n\n        setCss: function (newanim) {\n            if (newanim.from === undefined || newanim.from === null) {\n                newanim.from = laroux.css.getProperty(newanim.object, newanim.property);\n            }\n\n            newanim.object = newanim.object.style;\n            newanim.property = laroux.helpers.camelCase(newanim.property);\n\n            laroux.anim.set(newanim);\n        },\n\n        remove: function (id) {\n            var targetKey = null;\n\n            for (var item in laroux.anim.data) {\n                if (!laroux.anim.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux.anim.data[item];\n\n                if (currentItem.id !== undefined && currentItem.id == id) {\n                    targetKey = item;\n                    break;\n                }\n            }\n\n            if (targetKey !== null) {\n                laroux.anim.data.splice(targetKey, 1);\n                return true;\n            }\n\n            return false;\n        },\n\n        onframe: function (timestamp) {\n            var removeKeys = [];\n            for (var item in laroux.anim.data) {\n                if (!laroux.anim.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux.anim.data[item];\n                if (currentItem.startTime === null) {\n                    currentItem.startTime = timestamp;\n                }\n\n                var result = laroux.anim.step(currentItem, timestamp);\n\n                if (result === false) {\n                    removeKeys.unshift(item);\n                } else if (timestamp > currentItem.startTime + currentItem.time) {\n                    if (currentItem.reset) {\n                        currentItem.startTime = timestamp;\n                        if (newanim.object === document.body && newanim.property == 'scrollTop') {\n                            scrollTo(0, currentItem.from);\n                            // setTimeout(function () { scrollTo(0, currentItem.from); }, 1);\n                        } else {\n                            currentItem.object[currentItem.property] = currentItem.from;\n                        }\n                    } else {\n                        removeKeys.unshift(item);\n                    }\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux.anim.data.splice(removeKeys[item2], 1);\n            }\n\n            if (laroux.anim.data.length > 0) {\n                requestAnimationFrame(laroux.anim.onframe);\n            }\n        },\n\n        step: function (newanim, timestamp) {\n            var finishT = newanim.startTime + newanim.time,\n                shift = (timestamp > finishT) ? 1 : (timestamp - newanim.startTime) / newanim.time;\n\n            var value = laroux.anim.fx.interpolate(\n                newanim.from,\n                newanim.to,\n                laroux.anim.fx.easing(shift)\n            ) + newanim.unit;\n\n            if (newanim.object === document.body && newanim.property == 'scrollTop') {\n                scrollTo(0, value);\n                // setTimeout(function () { scrollTo(0, value); }, 1);\n            } else {\n                newanim.object[newanim.property] = value;\n            }\n        }\n    });\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // keys\n    laroux.ns('laroux.keys', {\n        keyName: function (keycode) {\n            keycode = keycode.toLowerCase();\n\n            switch (keycode) {\n            case 'backspace':\n                return 8;\n\n            case 'tab':\n                return 9;\n\n            case 'enter':\n            case 'return':\n                return 13;\n\n            case 'esc':\n            case 'escape':\n                return 27;\n\n            case 'space':\n                return 32;\n\n            case 'pgup':\n                return 33;\n\n            case 'pgdn':\n                return 34;\n\n            case 'end':\n                return 35;\n\n            case 'home':\n                return 36;\n\n            case 'left':\n                return 37;\n\n            case 'up':\n                return 38;\n\n            case 'right':\n                return 39;\n\n            case 'down':\n                return 40;\n\n            case 'insert':\n                return 45;\n\n            case 'delete':\n                return 46;\n\n            case 'f1':\n                return 112;\n\n            case 'f2':\n                return 113;\n\n            case 'f3':\n                return 114;\n\n            case 'f4':\n                return 115;\n\n            case 'f5':\n                return 116;\n\n            case 'f6':\n                return 117;\n\n            case 'f7':\n                return 118;\n\n            case 'f8':\n                return 119;\n\n            case 'f9':\n                return 120;\n\n            case 'f10':\n                return 121;\n\n            case 'f11':\n                return 122;\n\n            case 'f12':\n                return 123;\n\n            case ',':\n                return 188;\n\n            case '.':\n                return 190;\n            }\n\n            return String.fromCharCode(keycode);\n        },\n\n        // {target, key, shift, ctrl, alt, disableInputs, fnc}\n        assign: function (options) {\n            var wrapper = function (ev) {\n                if (!ev) {\n                    ev = event;\n                }\n\n                var element = ev.target || ev.srcElement;\n                if (element.nodeType === 3 || element.nodeType === 11) { // element.nodeType === 1 ||\n                    element = element.parentNode;\n                }\n\n                if (options.disableInputs && laroux.forms.isFormField(element)) {\n                    return;\n                }\n\n                if (options.shift && !ev.shiftKey) {\n                    return;\n                }\n\n                if (options.ctrl && !ev.ctrlKey) {\n                    return;\n                }\n\n                if (options.alt && !ev.altKey) {\n                    return;\n                }\n\n                var key = laroux.keys.keyName(options.key);\n                if (key !== (ev.keyCode || ev.which)) {\n                    return;\n                }\n\n                options.fnc(ev);\n\n                return false;\n            };\n\n            laroux.dom.setEvent(options.target || document, 'keydown', wrapper);\n        }\n    });\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // mvc\n    laroux.ns('laroux.mvc', {\n        apps: {},\n        pauseUpdate: false,\n\n        init: function (element, model) {\n            if (element.constructor === String) {\n                element = laroux.dom.selectById(element);\n            }\n\n            // if (model.constructor !== laroux.stack) {\n            //     model = new laroux.stack(model);\n            // }\n\n            var appKey = element.getAttribute('id');\n\n            model.onupdate = function (event) {\n                if (!laroux.mvc.pauseUpdate) {\n                    laroux.mvc.update(appKey); // , [event.key]\n                }\n            };\n\n            laroux.mvc.apps[appKey] = {\n                element: element,\n                model: model // ,\n                // modelKeys: null,\n                // boundElements: null,\n                // eventElements: null\n            };\n\n            laroux.mvc.rebind(appKey);\n        },\n\n        rebind: function (appKey) {\n            var app = laroux.mvc.apps[appKey];\n            /*jslint nomen: true */\n            app.modelKeys = laroux.helpers.getKeysRecursive(app.model._data); // FIXME: works only for $l.stack\n            app.boundElements = {};\n            app.eventElements = [];\n\n            laroux.mvc.scanElements(app, app.element);\n            laroux.mvc.update(appKey);\n\n            var fnc = function (ev, elem) {\n                var binding = laroux.mvc.bindStringParser(elem.getAttribute('lr-event'));\n                // laroux.mvc.pauseUpdate = true;\n                for (var item in binding) {\n                    if (item === null || !binding.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    if (binding[item].charAt(0) == '\\'') {\n                        app.model[item] = binding[item].substring(1, binding[item].length - 1);\n                    } else if (binding[item].substring(0, 5) == 'attr.') {\n                        app.model[item] = elem.getAttribute(binding[item].substring(5));\n                    } else if (binding[item].substring(0, 5) == 'prop.') {\n                        app.model[item] = elem[binding[item].substring(5)];\n                    }\n                }\n                // laroux.mvc.pauseUpdate = false;\n            };\n\n            for (var i = 0, length = app.eventElements.length; i < length; i++) {\n                laroux.dom.setEvent(\n                    app.eventElements[i].element,\n                    app.eventElements[i].binding[null],\n                    fnc\n                );\n            }\n        },\n\n        scanElements: function (app, element) {\n            for (var i = 0, atts = element.attributes, m = atts.length; i < m; i++) {\n                if (atts[i].name == 'lr-bind') {\n                    var binding1 = laroux.mvc.bindStringParser(atts[i].value);\n\n                    for (var item in binding1) {\n                        if (!binding1.hasOwnProperty(item)) {\n                            continue;\n                        }\n\n                        if (app.boundElements[binding1[item]] === undefined) {\n                            app.boundElements[binding1[item]] = [];\n                        }\n\n                        app.boundElements[binding1[item]].push({\n                            element: element,\n                            target: item\n                        });\n                    }\n                } else if (atts[i].name == 'lr-event') {\n                    var binding2 = laroux.mvc.bindStringParser(atts[i].value);\n\n                    app.eventElements.push({\n                        element: element,\n                        binding: binding2\n                    });\n                }\n            }\n\n            for (var j = 0, chldrn = element.childNodes, n = chldrn.length; j < n; j++) {\n                if (chldrn[j].nodeType === 1) {\n                    laroux.mvc.scanElements(app, chldrn[j]);\n                }\n            }\n        },\n\n        update: function (appKey, keys) {\n            var app = laroux.mvc.apps[appKey];\n\n            if (typeof keys == 'undefined') {\n                keys = app.modelKeys;\n            }\n\n            for (var i = 0, length1 = keys.length; i < length1; i++) {\n                if (!(keys[i] in app.boundElements)) {\n                    continue;\n                }\n\n                var boundElement = app.boundElements[keys[i]];\n\n                for (var j = 0, length2 = boundElement.length; j < length2; j++) {\n                    if (boundElement[j].target.substring(0, 6) == 'style.') {\n                        boundElement[j].element.style[boundElement[j].target.substring(6)] = laroux.helpers.getElement(app.model, keys[i]);\n                    } else if (boundElement[j].target.substring(0, 5) == 'attr.') {\n                        // FIXME removeAttribute on null value?\n                        boundElement[j].element.setAttribute(boundElement[j].target.substring(5), laroux.helpers.getElement(app.model, keys[i]));\n                    } else if (boundElement[j].target.substring(0, 5) == 'prop.') {\n                        // FIXME removeAttribute on null value?\n                        boundElement[j].element[boundElement[j].target.substring(5)] = laroux.helpers.getElement(app.model, keys[i]);\n                    }\n                }\n            }\n        },\n\n        bindStringParser: function (text) {\n            var lastBuffer = null,\n                buffer = '',\n                state = 0,\n                result = {};\n\n            for (var i = 0, length = text.length; i < length; i++) {\n                var curr = text.charAt(i);\n\n                if (state === 0) {\n                    if (curr == ':') {\n                        state = 1;\n                        lastBuffer = buffer.trim();\n                        buffer = '';\n                        continue;\n                    }\n                }\n\n                if (curr == ',') {\n                    state = 0;\n                    result[lastBuffer] = buffer.trim();\n                    buffer = '';\n                    continue;\n                }\n\n                buffer += curr;\n            }\n\n            if (buffer.length > 0) {\n                result[lastBuffer] = buffer.trim();\n            }\n\n            return result;\n        }\n    });\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // templates\n    laroux.ns('laroux.templates', {\n        engines: {\n            plain: {\n                compile: function (template, options) {\n                    return [template, options];\n                },\n\n                render: function (compiled, model) {\n                    var result = compiled[0],\n                        dict = [],\n                        lastIndex = 0,\n                        nextIndex;\n\n                    while ((nextIndex = result.indexOf('{{', lastIndex)) !== -1) {\n                        nextIndex += 2;\n                        var closeIndex = result.indexOf('}}', nextIndex);\n                        if (closeIndex === -1) {\n                            break;\n                        }\n\n                        var key = result.substring(nextIndex, closeIndex);\n                        dict['{{' + key + '}}'] = laroux.helpers.getElement(model, key, '');\n                        lastIndex = closeIndex + 2;\n                    }\n\n                    return laroux.helpers.replaceAll(result, dict);\n                }\n            },\n\n            hogan: {\n                compile: function (template, options) {\n                    return Hogan.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled.render(model);\n                }\n            },\n\n            mustache: {\n                compile: function (template, options) {\n                    return Mustache.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            handlebars: {\n                compile: function (template, options) {\n                    return Handlebars.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            lodash: {\n                compile: function (template, options) {\n                    /*jslint nomen: true */\n                    return _.compile(template, null, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            underscore: {\n                compile: function (template, options) {\n                    /*jslint nomen: true */\n                    return _.compile(template, null, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            }\n        },\n        engine: 'plain',\n\n        apply: function (element, model, options) {\n            var content, engine = laroux.templates.engines[laroux.templates.engine];\n\n            if (element.nodeType === 1 || element.nodeType === 3 || element.nodeType === 11) {\n                content = element.textContent;\n            } else {\n                content = element.nodeValue;\n            }\n\n            var compiled = engine.compile(content, options);\n            return engine.render(compiled, model);\n        },\n\n        insert: function (element, model, target, position, options) {\n            var output = laroux.templates.apply(element, model, options);\n\n            laroux.dom.insert(target, position || 'beforeend', output);\n        },\n\n        replace: function (element, model, target, options) {\n            var output = laroux.templates.apply(element, model, options);\n\n            laroux.dom.replace(target, output);\n        }\n    });\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // touch - partially taken from 'tocca.js' project\n    //         can be found at: https://github.com/GianlucaGuarini/Tocca.js\n    laroux.ns('laroux.touch', {\n        touchStarted: null,\n        swipeTreshold: 80,\n        precision: 30,\n        tapCount: 0,\n        tapTreshold: 200,\n        longTapTreshold: 800,\n        tapTimer: null,\n        pos: null,\n        cached: null,\n\n        events: {\n            start: ['touchstart', 'pointerdown', 'MSPointerDown', 'mousedown'],\n            end: ['touchend', 'pointerup', 'MSPointerUp', 'mouseup'],\n            move: ['touchmove', 'pointermove', 'MSPointerMove', 'mousemove']\n        },\n\n        locatePointer: function (event) {\n            if (event.targetTouches) {\n                event = event.targetTouches[0];\n            }\n\n            laroux.touch.pos = [event.pageX, event.pageY];\n        },\n\n        init: function () {\n            var events = [\n                0,\n                (navigator.msPointerEnabled) ? 2 : 1,\n                3\n            ];\n\n            for (var i = 0, length = events.length; i < length; i++) {\n                laroux.dom.setEventSingle(document, laroux.touch.events.start[events[i]], laroux.touch.onstart);\n                laroux.dom.setEventSingle(document, laroux.touch.events.end[events[i]], laroux.touch.onend);\n                laroux.dom.setEventSingle(document, laroux.touch.events.move[events[i]], laroux.touch.locatePointer);\n            }\n        },\n\n        onstart: function (event) {\n            laroux.touch.locatePointer(event);\n            laroux.touch.cached = [laroux.touch.pos[0], laroux.touch.pos[1]];\n            laroux.touch.touchStarted = Date.now();\n            /*jslint plusplus: true */\n            laroux.touch.tapCount++;\n\n            var fnc = function () {\n                if (laroux.touch.cached[0] >= laroux.touch.pos[0] - laroux.touch.precision &&\n                        laroux.touch.cached[0] <= laroux.touch.pos[0] + laroux.touch.precision &&\n                        laroux.touch.cached[1] >= laroux.touch.pos[1] - laroux.touch.precision &&\n                        laroux.touch.cached[1] <= laroux.touch.pos[1] + laroux.touch.precision) {\n                    if (laroux.touch.touchStarted === null) {\n                        laroux.dom.dispatchEvent(\n                            event.target,\n                            (laroux.touch.tapCount === 2) ? 'dbltap' : 'tap',\n                            {\n                                innerEvent: event,\n                                x: laroux.touch.pos[0],\n                                y: laroux.touch.pos[1]\n                            }\n                        );\n\n                        laroux.touch.tapCount = 0;\n                        return;\n                    }\n\n                    if (Date.now() - laroux.touch.touchStarted > laroux.touch.longTapTreshold) {\n                        laroux.dom.dispatchEvent(\n                            event.target,\n                            'longtap',\n                            {\n                                innerEvent: event,\n                                x: laroux.touch.pos[0],\n                                y: laroux.touch.pos[1]\n                            }\n                        );\n\n                        laroux.touch.touchStarted = null;\n                        laroux.touch.tapCount = 0;\n                        return;\n                    }\n\n                    laroux.touch.tapTimer = setTimeout(fnc, laroux.touch.tapTreshold);\n                    return;\n                }\n\n                laroux.touch.tapCount = 0;\n            };\n\n            clearTimeout(laroux.touch.tapTimer);\n            laroux.touch.tapTimer = setTimeout(fnc, laroux.touch.tapTreshold);\n        },\n\n        onend: function (event) {\n            var delta = [\n                    laroux.touch.pos[0] - laroux.touch.cached[0],\n                    laroux.touch.pos[1] - laroux.touch.cached[1]\n                ],\n                data = {\n                    innerEvent: event,\n                    x: laroux.touch.pos[0],\n                    y: laroux.touch.pos[1],\n                    distance: {\n                        x: Math.abs(delta[0]),\n                        y: Math.abs(delta[1])\n                    }\n                };\n\n            laroux.touch.touchStarted = null;\n\n            if (delta[0] <= -laroux.touch.swipeTreshold) {\n                laroux.dom.dispatchEvent(event.target, 'swiperight', data);\n            }\n\n            if (delta[0] >= laroux.touch.swipeTreshold) {\n                laroux.dom.dispatchEvent(event.target, 'swipeleft', data);\n            }\n\n            if (delta[1] <= -laroux.touch.swipeTreshold) {\n                laroux.dom.dispatchEvent(event.target, 'swipedown', data);\n            }\n\n            if (delta[1] >= laroux.touch.swipeTreshold) {\n                laroux.dom.dispatchEvent(event.target, 'swipeup', data);\n            }\n        }\n    });\n\n    // laroux.ready(laroux.touch.init);\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // ui\n    laroux.ns('laroux.ui', {\n        floatContainer: null,\n\n        popup: {\n            defaultTimeout: 500,\n\n            createBox: function (id, xclass, message) {\n                return laroux.dom.createElement('DIV', { id: id, 'class': xclass }, message);\n            },\n\n            msgbox: function (timeout, message) {\n                var id = laroux.helpers.getUniqueId(),\n                    obj = laroux.ui.popup.createBox(id, 'larouxMsgBox', message);\n                laroux.ui.floatContainer.appendChild(obj);\n\n                laroux.css.setProperty(obj, { opacity: 1 });\n\n                laroux.timers.set({\n                    timeout: timeout,\n                    reset: false,\n                    ontick: function (x) {\n                        // laroux.css.setProperty(x, { opacity: 0 });\n                        laroux.dom.remove(x);\n                    },\n                    state: obj\n                });\n            }\n        },\n\n        loading: {\n            elementSelector: null,\n            element: null,\n            defaultDelay: 1500,\n            timer: null,\n\n            killTimer: function () {\n                clearTimeout(laroux.ui.loading.timer);\n            },\n\n            hide: function () {\n                laroux.ui.loading.killTimer();\n\n                laroux.css.setProperty(laroux.ui.loading.element, { display: 'none' });\n                localStorage.loadingIndicator = 'false';\n            },\n\n            show: function (delay) {\n                laroux.ui.loading.killTimer();\n\n                if (delay === undefined) {\n                    delay = laroux.ui.loading.defaultDelay;\n                }\n\n                if (delay > 0) {\n                    setTimeout(function () { laroux.ui.loading.show(0); }, delay);\n                } else {\n                    laroux.css.setProperty(laroux.ui.loading.element, { display: 'block' });\n                    localStorage.loadingIndicator = 'true';\n                }\n            },\n\n            init: function () {\n                if (laroux.ui.loading.element === null && laroux.ui.loading.elementSelector !== null) {\n                    laroux.ui.loading.element = laroux.dom.selectSingle(laroux.ui.loading.elementSelector);\n                }\n\n                if (laroux.ui.loading.element !== null) {\n                    laroux.dom.setEvent(window, 'load', laroux.ui.loading.hide);\n                    laroux.dom.setEvent(window, 'beforeunload', laroux.ui.loading.show);\n\n                    if (localStorage.loadingIndicator !== undefined && localStorage.loadingIndicator === 'true') {\n                        laroux.ui.loading.show(0);\n                    } else {\n                        laroux.ui.loading.show();\n                    }\n                }\n            }\n        },\n\n        dynamicDates: {\n            updateDatesElements: null,\n\n            updateDates: function () {\n                if (laroux.ui.dynamicDates.updateDatesElements === null) {\n                    laroux.ui.dynamicDates.updateDatesElements = laroux.dom.select('*[data-epoch]');\n                }\n\n                for (var item in laroux.ui.dynamicDates.updateDatesElements) {\n                    if (!laroux.ui.dynamicDates.updateDatesElements.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    var obj = laroux.ui.dynamicDates.updateDatesElements[item];\n                    // bitshifting (str >> 0) used instead of parseInt(str, 10)\n                    var date = new Date((obj.getAttribute('data-epoch') >> 0) * 1000);\n\n                    laroux.dom.replace(\n                        obj,\n                        laroux.date.getDateString(date)\n                    );\n\n                    obj.setAttribute('title', laroux.date.getLongDateString(date));\n                }\n            },\n\n            init: function () {\n                laroux.timers.set({\n                    timeout: 500,\n                    reset: true,\n                    ontick: laroux.ui.dynamicDates.updateDates\n                });\n            }\n        },\n\n        scrollView: {\n            selectedElements: [],\n\n            onhidden: function (elements) {\n                laroux.css.setProperty(elements, { opacity: 0 });\n                laroux.css.setTransition(elements, ['opacity']);\n            },\n\n            onreveal: function (elements) {\n                laroux.css.setProperty(elements, { opacity: 1 });\n            },\n\n            set: function (element) {\n                var elements = laroux.helpers.getAsArray(element);\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (!laroux.css.inViewport(elements[i])) {\n                        laroux.ui.scrollView.selectedElements.push(elements[i]);\n                    }\n                }\n\n                laroux.ui.scrollView.onhidden(laroux.ui.scrollView.selectedElements);\n                laroux.dom.setEvent(window, 'scroll', laroux.ui.scrollView.reveal);\n            },\n\n            reveal: function () {\n                var removeKeys = [],\n                    elements = [];\n\n                laroux.helpers.each(\n                    laroux.ui.scrollView.selectedElements,\n                    function (i, element) {\n                        if (laroux.css.inViewport(element)) {\n                            removeKeys.unshift(i);\n                            elements.push(element);\n                        }\n                    }\n                );\n\n                for (var item in removeKeys) {\n                    if (!removeKeys.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    laroux.ui.scrollView.selectedElements.splice(removeKeys[item], 1);\n                }\n\n                if (laroux.ui.scrollView.selectedElements.length === 0) {\n                    laroux.dom.unsetEvent(window, 'scroll', laroux.ui.scrollView.reveal);\n                }\n\n                if (elements.length > 0) {\n                    laroux.ui.scrollView.onreveal(elements);\n                }\n            }\n        },\n\n        createFloatContainer: function () {\n            if (!laroux.ui.floatContainer) {\n                laroux.ui.floatContainer = laroux.dom.createElement('DIV', { 'class': 'larouxFloatDiv' });\n                document.body.insertBefore(laroux.ui.floatContainer, document.body.firstChild);\n            }\n        },\n\n        init: function () {\n            laroux.ui.createFloatContainer();\n            laroux.ui.loading.init();\n            laroux.ui.dynamicDates.init();\n        }\n    });\n\n    // laroux.ready(laroux.ui.init);\n\n}).call(this);\n\n(function () {\n    'use strict';\n\n    // web\n    laroux.ns('laroux', {\n        cached: {\n            single: {},\n            array: {},\n            id: {}\n        },\n\n        c: function (selector) {\n            if (selector instanceof Array) {\n                return laroux.cached.array[selector] || (\n                    laroux.cached.array[selector] = laroux.helpers.toArray(\n                        document.querySelectorAll(selector)\n                    )\n                );\n            }\n\n            return laroux.cached.single[selector] || (\n                laroux.cached.single[selector] = document.querySelector(selector)\n            );\n        },\n\n        id: function (selector, parent) {\n            return (parent || document).getElementById(selector);\n        },\n\n        idc: function (selector) {\n            return laroux.cached.id[selector] ||\n                (laroux.cached.id[selector] = document.getElementById(selector));\n        },\n\n        readyPassed: false,\n\n        ready: function (fnc) {\n            if (!laroux.readyPassed) {\n                laroux.events.add('ContentLoaded', fnc);\n                return;\n            }\n\n            fnc();\n        }\n    });\n\n    document.addEventListener(\n        'DOMContentLoaded',\n        function () {\n            if (!laroux.readyPassed) {\n                laroux.events.invoke('ContentLoaded');\n                setInterval(laroux.timers.ontick, 100);\n                laroux.touch.init();\n                laroux.readyPassed = true;\n            }\n        }\n    );\n\n}).call(this);\n"],"sourceRoot":"/source/"}